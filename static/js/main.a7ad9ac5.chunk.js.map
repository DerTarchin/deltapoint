{"version":3,"sources":["static/logo.svg","components/ContentEditable.js","components/Portfolio.js","utils/decrypt.js","utils/numformat.js","utils/colorformat.js","utils/index.js","utils/icons.js","components/Balances.js","components/Volatility.js","components/Breakdown.js","components/Charts.js","Interface.js","InterfaceMobile.js","index.js"],"names":["module","exports","__webpack_require__","p","ContentEditable","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","static_html","html","setState","_this2","_this3","refs","contentEditable","focus","setTimeout","_this4","noop","normalized","blacklist","prop","includes","react_default","a","createElement","assign","ref","suppressContentEditableWarning","dangerouslySetInnerHTML","__html","onInput","e","target","textContent","onBlur","onKeyPress","persist","allowEnter","key","keyCode","which","IS_ENTER","preventDefault","blur","disableMax","length","Component","Portfolio","meta","componentDidMount","toggle","render","className","id","CryptoJS","require","decrypt","message","passphrase","encryptedHMAC","substring","encryptedHTML","HmacSHA256","SHA256","toString","salt","enc","Hex","parse","substr","iv","encrypted","PBKDF2","keySize","iterations","JSON","AES","padding","pad","Pkcs7","mode","CBC","Utf8","ranges","divider","suffix","getNumberProperties","num","invalid","trim","isNaN","_num","replace","toUpperCase","match","map","r","multiplier","find","comma","split","valid","string","number","value","join","round","scale","arr","sig","Math","makeDoubleDecimal","getColorProperties","hex","toRGB","result","exec","parseInt","g","b","_toRGB","h","s","max","min","l","d","objectSpread","concat","rgbStr","hslStr","getAlpha","val","parseFloat","glow","colorProps","color","pagePos","el","pos","x","y","offsetLeft","scrollLeft","clientLeft","offsetTop","scrollTop","clientTop","offsetParent","frmt","start","end","year","Date","getFullYear","format","sepFrmt","m","M","useYear","p5map","inMin","inMax","outMin","outMax","colorMap","tactical","conservative","aggressive","cash","other","bg","constrain","getLatest","data","date","latest","day","clone","subtract","threedot","width","height","viewBox","version","xmlns","doublearrow","fill","rotatephone","angle","Balances","componentWillReceiveProps","showData","mobile","old","activeDates","perc","dataView","shouldAnimate","adj","balance","ytd_contributions","pl","feeAdjustments","contributionAdjustments","_this$refs","ytd","anim","balance_from","ytd_from","pl_from","valAnims","pause","anime","targets","getMaxContributions","plPerc","easing","duration","update","balance_from_history","valEls","querySelectorAll","forEach","n","i","innerHTML","ytd_from_history","querySelector","pl_from_history","abs","pair","list","max_contribution","_this$props","ytdRange","ytdPerc","total","total_contributions","plRange","v","commIndex","commission","currComm","moment","isAfter","console","log","onClick","data-val","style","background","boxShadow","total_fees","start_date","days","diff","months","years","text","calcAge","Volatility","VTS","tickers","label","allocation","Breakdown","tradeDetails","componentWillMount","window","addEventListener","resizeGraphs","calcTradeDetails","componentDidUpdate","componentWillUnmount","removeEventListener","getVTS","sym","keys","arguments","undefined","history","symbols_traded","dets","buys","sells","trades","strat","isSameOrBefore","coms","filter","c","transactions","t","symbol","trans","type","positions","shares","price","isSame","currData","total_pl","total_pl_perc","add","graphs","body","svg","graphspace","details","display","size","clientWidth","clientHeight","setAttribute","baseRadius","toConsumableArray","getAttribute","strokeDasharray","PI","strokeDashoffset","document","crc","parentNode","circle","transform","_this$state","index","syms","avgs","dates","cash_balance","_latest$positions$sym","avg","since","cost","useOther","push","reduce","slide","stdDeviation","in","cx","cy","data-index","data-perc","stroke","goal","sort","sub","active","Charts","TILE_INTRO_DURATION","TILE_INTRO_DELAY","SCRUBBER_TICK","SCRUBBER_RANGE","WEEKDAY","Interface","headerIndex","scrubberEnd","lastDay","highlightDate","handleResize","handleKey","isSmall","innerWidth","drawScrubber","tileAnime","timeline","opacity","delay","header","offset","mounted","getElementsByClassName","rest","fromStartDate","toStartDate","fromDiff","toDiff","diffs","fromdiff","todiff","fromdiffhistory","todiffhistory","dateMenuAnim","currFromDate","currToDate","activeDateOpt","dateOptBg","loaded","opt","dateOpts","getBoundingClientRect","left","appOptBg","dvDollar","dvPerc","appOpts","rect","canvas","_this$props2","onSettingsChange","onDateChange","code","stopPropagation","changeHeader","newState","weekdays","activeScrubberEnd","time","isSameOrAfter","unshift","forceUpdate","setupTicks","ctx","dpr","devicePixelRatio","getContext","setupCanvas","clearRect","distance","calcTickDistance","lineWidth","beginPath","propActiveDates","canvasHighlight","strokeStyle","moveTo","lineTo","isBetween","scrub","canvasPos","getElementById","highlight","floor","pageX","propActiveDateOpt","scrubSelect","selectedDate","isBefore","scrubAdjust","mod","currentTarget","scrubBackwards","ticks","_this$props3","renderDates","useRef","fmt","data-slide","title","formatted","range","data-opt","range_count","range_type","onMouseMove","onMouseEnter","Portfolio_Portfolio","Balances_Balances","Volatility_Volatility","Breakdown_Breakdown","Charts_Charts","MENU_BG","InterfaceMobile","swipe","acctIndex","posIndex","app","processSlides","slides","children","transitionDuration","transformOrigin","acct","Swipe","account","startSlide","speed","draggable","continuous","disableScroll","callback","dir","marginTop","menu","classList","contains","fromElDay","fromElRest","toElDay","toElRest","moveHeaderStart","pageY","touches","clientY","interface","transitionTimingFunction","hasAttribute","drag","alpha","menuOpen","performance","now","moveHeader","top","appbg","screen","moveHeaderEnd","fast","hideMenu","showMenu","remove","dateChange","dateFrom","from","dateTo","to","changed","sep","datesRender","onTouchStart","onTouchMove","onTouchEnd","onMouseDown","onMouseUp","defaultValue","MOBILE_DEV","REQUEST","DATA_URL","LOGIN_ANIM_DURATION","NOW","DATE_OPTS","App","unlockError","showUnlock","mobileOrientation","orientation","error","response","alert","encryptedMsg","unlock","loginAnime","unlockInput","clearContent","dertarchinroth","accounts","activeAccount","decryptedMsg","acctData","last_updated","startDate","adjData","activeData","trimData","complete","hideUnlockError","tcontrib","_ref","fee","contrib","isOpt","defineProperty","isMobile","interfaceProps","alt","src","ContentEditable_ContentEditable","onKeyDown","InterfaceMobile_InterfaceMobile","Interface_Interface","ReactDOM","src_App"],"mappings":"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","file":"static/js/main.a7ad9ac5.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.75c537f9.svg\";","import React, { Component } from 'react';\n\nconst IS_ENTER = e => (e.key || e.keyCode) === 'Enter' || e.which === 13;\n\nexport default class ContentEditable extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      static_html: this.props.html,\n    };\n  }\n\n  componentWillReceiveProps(props) {\n    if(typeof props.html === 'string' && props.html !== this.state.static_html) {\n      this.setState({ static_html: props.html });\n    }\n  }\n\n  clearContent() {\n    this.setState({ static_html: ' ' }, () => this.setState({ static_html: '' }));\n  }\n\n  focus() {\n    this.refs.contentEditable.focus();\n    setTimeout(() => this.refs.contentEditable.focus(), 20);\n  }\n\n  render() {\n    const noop = () => {};\n    const props = this.props;\n    const normalized = {}, \n          blacklist = [\n            'allowEnter',\n            'disableMax',\n            'onInput',\n            'onKeyUp',\n            'onBlur',\n            'onKeyPress',\n            'html'\n          ];\n    for(let prop in props) if(!blacklist.includes(prop)) normalized[prop] = props[prop];\n    return (\n      <div\n        {...normalized}\n        ref=\"contentEditable\"\n        contentEditable\n        suppressContentEditableWarning\n        dangerouslySetInnerHTML={{__html: this.state.static_html}}\n        onInput={e => (props.onInput || noop)(e, e.target.textContent)}\n        onBlur={e => {\n          const static_html = e.target.textContent;\n          this.setState({static_html});\n          (props.onBlur || noop)(e, static_html);\n        }}\n        onKeyPress={e => {\n          e.persist();\n          const static_html = e.target.textContent;\n          if(!props.allowEnter && IS_ENTER(e)) {\n            e.preventDefault();\n            this.setState({static_html}, () => (props.onKeyPress || noop)(e, static_html));\n            e.target.blur();\n          }\n          else {\n            if(!props.disableMax && static_html.length > (props['data-max'] || 49)) return e.preventDefault();\n            (props.onKeyPress || noop)(e, static_html);\n          }\n        }}\n      />\n    );\n  }\n}","import React, { Component } from 'react';\n\n// require('./interface.css');\n\nexport default class Portfolio extends Component {\n  state = {};\n  meta = {}\n\n  componentDidMount = () => {}\n\n  toggle = () => {}\n\n  render = () => {\n    return (\n      <div className=\"tile-container\" id=\"portfolio\">\n        <div className=\"tile\">PORTFOLIO</div>\n      </div>\n    )\n  }\n}","const CryptoJS = require('crypto-js')\n\nexport const decrypt = (message, passphrase) => {\n  const encryptedHMAC = message.substring(0, 64),\n        encryptedHTML = message.substring(64),\n        decryptedHMAC = CryptoJS.HmacSHA256(encryptedHTML, CryptoJS.SHA256(passphrase).toString()).toString();\n\n  if (decryptedHMAC !== encryptedHMAC) return; // incorrect pass\n\n  const keySize = 256/32, \n        iterations = 1000,\n        salt = CryptoJS.enc.Hex.parse(encryptedHTML.substr(0, 32)),\n        iv = CryptoJS.enc.Hex.parse(encryptedHTML.substr(32, 32)),\n        encrypted = encryptedHTML.substring(64),\n        key = CryptoJS.PBKDF2(passphrase, salt, { keySize, iterations });\n\n  return JSON.parse(CryptoJS.AES.decrypt(encrypted, key, {\n      iv: iv,\n      padding: CryptoJS.pad.Pkcs7,\n      mode: CryptoJS.mode.CBC\n  }).toString(CryptoJS.enc.Utf8));\n}","const ranges = [\n  { divider: 1e18, suffix: 'P' },\n  { divider: 1e15, suffix: 'E' },\n  { divider: 1e12, suffix: 'T' },\n  { divider: 1e9 , suffix: 'B' },\n  { divider: 1e6 , suffix: 'M' },\n  { divider: 1e3 , suffix: 'K' }\n];\n\nconst getNumberProperties = num => {\n  const invalid = {}\n  if(typeof num === 'string') num = num.trim();\n  // check if empty string or undefined\n  if(num !== 0 && !num) return invalid;\n  // check if it's just a non-digit char\n  if((num+'').length === 1 && isNaN(num)) return invalid;\n  let _num = (num + '').replace(/,/g,''),\n      suffix = _num[_num.length-1].toUpperCase();\n  // split character at end\n  if(suffix.match(/^[A-Z]+$/)) _num = _num.substring(0, _num.length-1);\n  else suffix = null;\n  // check if not a number\n  if(isNaN(+_num)) return invalid;\n  // check incorrect suffix\n  if(suffix && !ranges.map(r => r.suffix).includes(suffix)) return invalid;\n  // return values - it's a number!\n  const multiplier = suffix ? ranges.find(r => r.suffix === suffix).divider : 1;\n  // create comma val\n  const comma = ((+_num * multiplier) + '').split('.');\n  comma[0] = comma[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n  return {\n    valid: true,\n    string: num,\n    number: +_num,\n    value: +_num * multiplier,\n    comma: comma.join('.'),\n    suffix,\n    multiplier,\n  }\n}\n\nconst formatNumber = (num, decimals) => {\n  const _num = getNumberProperties(num);\n  if(!_num) return '';\n  for (var i = 0; i < ranges.length; i++) {\n    if (_num.value >= ranges[i].divider) {\n      const condensed = parseFloat((_num.value / ranges[i].divider).toFixed(decimals)) + '' + ranges[i].suffix;\n      if(condensed.length > 4 + decimals) return formatNumber(_num.value, decimals - 1);\n      return condensed;\n    }\n  }\n  return _num.value+'';\n}\n\nconst splitNumberSuffix = num => {\n  const _num = getNumberProperties(num);\n  if(!_num) return ['', ''];\n  return [_num.number, _num.suffix]\n}\n\nconst getFullNumber = num => {\n  const _num = getNumberProperties(num);\n  if(!_num) return;\n  return _num.value;\n}\n\nconst round = (num, scale) => {\n  if(!(\"\" + num).includes(\"e\")) {\n    return +(Math.round(num + \"e+\" + scale)  + \"e-\" + scale);\n  } else {\n    var arr = (\"\" + num).split(\"e\");\n    var sig = \"\"\n    if(+arr[1] + scale > 0) {\n      sig = \"+\";\n    }\n    return +(Math.round(+arr[0] + \"e\" + sig + (+arr[1] + scale)) + \"e-\" + scale);\n  }\n}\n\nconst makeDoubleDecimal = props => {\n  if(!props.valid) return props;\n  if(!props.comma.includes('.')) props.comma += '.00';\n  if(props.comma.split('.')[1].length < 2) props.comma += '0';\n  return props;\n}\n\nexport {\n  formatNumber,\n  splitNumberSuffix,\n  getFullNumber,\n  getNumberProperties,\n  makeDoubleDecimal,\n  round,\n}","const getColorProperties = hex => {\n  const toRGB = hex => {\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n      r: parseInt(result[1], 16),\n      g: parseInt(result[2], 16),\n      b: parseInt(result[3], 16)\n    } : null;\n  }\n\n  let { r, g, b } = toRGB(hex);\n  r /= 255; g /= 255; b /= 255;\n  var max = Math.max(r, g, b), min = Math.min(r, g, b);\n  var h, s, l = (max + min) / 2;\n  if(max === min) h = s = 0; // achromatic\n  else {\n    var d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    switch(max) {\n        case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n        case g: h = (b - r) / d + 2; break;\n        case b: h = (r - g) / d + 4; break;\n        default: break;\n    }\n    h /= 6;\n  }\n  s = Math.round(s*100);\n  l = Math.round(l*100);\n  h = Math.round(360*h);\n\n  return {\n    hex: `#${hex.replace('#','')}`,\n    ...toRGB(hex),\n    h, s, l,\n    a: 1,\n    rgbStr: (r,g,b,a) => `rgb${!a && a !== 0 ? '' : 'a'}(${r},${g},${b}${!a && a !== 0 ? '' : `,${a}`})`,\n    hslStr: (h,s,l,a) => `hsl${!a && a !== 0 ? '' : 'a'}(${h},${s}%,${l}%${!a && a !== 0 ? '' : `,${a}`})`,\n  }\n}\n\nconst getAlpha = val => parseFloat(val.split(',')[val.split(',').length-1].replace(')',''))\n\nconst glow = colorProps => {\n  const {r, g, b} = colorProps;\n  const color = colorProps.rgbStr(r,g,b,.7);\n  return `0px 0px 7px 0px ${color}`;\n}\n\nexport {\n  getAlpha,\n  getColorProperties,\n  glow\n}","import { decrypt } from './decrypt';\nimport { debounce } from './debounce';\nimport {\n  formatNumber,\n  splitNumberSuffix,\n  getFullNumber,\n  getNumberProperties,\n  makeDoubleDecimal,\n  round,\n} from './numformat';\nimport {\n  getColorProperties,\n  getAlpha,\n  glow\n} from './colorformat';\n\nconst pagePos = el => {\n  const pos = {x: 0, y: 0};\n  while (el) {\n    pos.x += (el.offsetLeft - el.scrollLeft + el.clientLeft);\n    pos.y += (el.offsetTop - el.scrollTop + el.clientTop);     \n    el = el.offsetParent;\n  }\n  return pos;\n}\n\n// string formatting date range\nconst frmt = (start, end) => {\n  const year = (new Date()).getFullYear();\n  if(start && !end && start.year() === year) return start.format('MMM D');\n  if(start && !end) return start.format('MMM D, YYYY');\n  if(end && !start && end.year() === year) return end.format('MMM D');\n  if(end && !start) return end.format('MMM D, YYYY');\n  if(start.year() !== end.year() || end.year() !== year) return [\n    start.format('MMM D, YYYY'),\n    end.format('MMM D, YYYY')\n  ];\n  return [\n    start.format('MMM D'),\n    end.format('MMM D')\n  ]\n}\n\n// seperated formatting date range\nconst sepFrmt = (start, end) => {\n  const year = (new Date()).getFullYear();\n  if(start && !end) return {\n    y: start.year(),\n    m: start.format('MMM'),\n    M: start.format('MMMM'),\n    d: start.format('D'),\n    useYear: start.year() !== year\n  };\n  if(end && !start) return {\n    y: end.year(),\n    m: end.format('MMM'),\n    M: end.format('MMMM'),\n    d: end.format('D'),\n    useYear: end.year() !== year\n  };\n  return [\n    {\n      y: start.year(),\n      m: start.format('MMM'),\n      M: start.format('MMMM'),\n      d: start.format('D'),\n      useYear: start.year() !== end.year() || end.year() !== year\n    }, {\n      y: end.year(),\n      m: end.format('MMM'),\n      M: end.format('MMMM'),\n      d: end.format('D'),\n      useYear: start.year() !== end.year() || end.year() !== year\n    }\n  ]\n}\n\nconst p5map = (val, inMin, inMax, outMin, outMax) => outMin + (outMax - outMin) * ((val - inMin) / (inMax - inMin))\n\nconst colorMap = {\n  tactical: '#71f48b', // hsl(132, 85%, 70%) = green,\n  conservative: '#5af2f2', // hsl(180, 85%, 65%) = blue \n  aggressive: '#559ef6', // hsl(213, 90%, 65%) = dark blue faded\n  cash: '#b6a0f8', // hsl(255, 85%, 80%) = lilac,\n  other: '#f688de', // hsl(313, 85%, 75%) = pink,\n  bg: '#445db1', // hsl(226, 44%, 48%) = dark blue faded\n}\n\nconst constrain = (val, min, max) => val < min ? min : val > max ? max : val\n\nconst getLatest = (data, date) => {\n  let latest, day = date.clone();\n  while(!latest) {\n    latest = data[day.format('L')];\n    day.subtract(1, 'days');\n  }\n  return latest;\n}\n\nexport {\n  decrypt,\n  pagePos,\n  frmt, \n  sepFrmt,\n  debounce,\n  formatNumber,\n  splitNumberSuffix,\n  getFullNumber,\n  getNumberProperties,\n  makeDoubleDecimal,\n  round,\n  getAlpha,\n  glow,\n  getColorProperties,\n  p5map,\n  constrain,\n  colorMap,\n  getLatest\n}","import React from 'react';\n\nconst daterange = (\n  <svg width=\"837pt\" height=\"853pt\" viewBox=\"0 0 837 853\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n    <g>\n      <path d=\" M 192.91 0.00 L 226.04 0.00 C 233.74 0.70 241.35 3.63 247.11 8.84 C 253.02 15.06 257.33 23.25 257.15 32.01 C 257.30 73.35 257.15 114.70 257.23 156.04 C 257.21 159.98 257.23 163.96 256.44 167.83 C 254.48 176.39 249.08 184.18 241.49 188.68 C 234.51 193.04 225.99 193.37 218.00 193.22 C 208.63 193.02 199.23 193.61 189.88 192.88 C 179.88 192.12 170.65 186.04 165.47 177.54 C 161.90 171.73 160.87 164.77 160.78 158.06 C 160.80 117.04 160.79 76.01 160.78 34.99 C 160.87 27.82 162.11 20.32 166.38 14.37 C 172.20 5.61 182.57 0.60 192.91 0.00 Z\" />\n      <path d=\" M 609.64 0.00 L 643.63 0.00 C 653.92 0.64 664.28 5.57 669.99 14.38 C 674.43 20.25 675.63 27.83 675.70 35.02 C 675.68 76.33 675.71 117.65 675.69 158.97 C 675.72 166.02 673.77 173.08 670.01 179.05 C 664.43 187.28 654.94 192.66 644.98 193.03 C 635.01 193.47 625.01 193.07 615.03 193.23 C 606.82 193.37 598.16 191.77 591.69 186.38 C 583.46 180.40 579.18 170.05 579.32 160.04 C 579.30 117.69 579.29 75.34 579.33 32.99 C 579.15 26.05 581.35 19.16 585.43 13.55 C 590.78 5.52 600.31 1.21 609.64 0.00 Z\" />\n      <path d=\" M 41.73 84.82 C 49.68 81.39 58.42 80.71 66.97 80.54 C 87.55 80.51 108.14 80.62 128.73 80.49 C 128.66 107.31 128.69 134.14 128.71 160.96 C 128.61 174.29 132.85 187.60 140.70 198.38 C 150.47 212.31 166.15 221.89 182.94 224.50 C 190.58 225.72 198.34 225.19 206.04 225.31 C 214.36 225.19 222.70 225.57 231.02 225.03 C 244.40 224.00 257.13 218.23 267.37 209.68 C 280.89 197.75 289.49 180.14 289.52 162.01 C 289.53 134.83 289.63 107.65 289.46 80.46 C 375.29 80.64 461.12 80.51 546.94 80.53 C 546.95 107.37 546.93 134.20 546.96 161.03 C 546.95 170.62 549.01 180.23 553.28 188.84 C 561.33 205.84 577.30 218.72 595.48 223.35 C 605.44 226.01 615.81 225.17 626.00 225.30 C 638.12 225.13 650.55 226.29 662.29 222.55 C 673.94 218.75 684.81 212.04 692.68 202.55 C 701.99 191.19 707.75 176.76 707.76 161.99 C 707.80 134.84 707.81 107.68 707.75 80.53 C 726.17 80.56 744.58 80.54 762.99 80.54 C 772.82 80.47 782.91 80.57 792.31 83.83 C 815.53 91.07 833.13 112.97 835.97 137.01 C 836.61 142.31 836.43 147.67 836.46 153.00 C 836.45 359.33 836.46 565.65 836.45 771.98 C 836.34 784.21 837.37 796.80 833.27 808.57 C 828.30 822.80 818.54 835.52 805.58 843.37 C 795.90 849.53 784.55 852.29 773.19 853.00 L 65.51 853.00 C 56.56 852.45 47.40 851.49 39.17 847.63 C 17.91 838.67 1.91 817.35 0.54 794.15 L 0.00 798.28 L 0.00 140.22 C 2.07 115.95 18.48 92.91 41.73 84.82 M 59.44 338.69 C 53.10 340.91 48.00 347.05 48.24 353.97 C 48.18 498.65 48.22 643.33 48.22 788.00 C 47.68 796.96 55.98 805.12 64.91 804.54 C 300.29 804.55 535.67 804.54 771.04 804.55 C 780.08 805.18 788.87 797.25 788.30 788.02 C 788.32 643.68 788.30 499.34 788.31 355.00 C 788.84 347.39 783.27 340.07 775.90 338.35 C 772.32 337.70 768.67 337.99 765.06 337.94 C 534.02 337.95 302.98 337.94 71.94 337.94 C 67.78 338.04 63.50 337.53 59.44 338.69 Z\" />\n      <path d=\" M 292.12 461.75 C 294.91 459.55 298.51 457.17 302.20 458.46 C 305.20 460.13 305.32 464.04 305.43 467.08 C 305.49 488.41 305.44 509.74 305.46 531.06 C 380.57 531.04 455.68 531.06 530.79 531.06 C 530.79 510.02 530.78 488.99 530.79 467.96 C 530.73 464.47 531.22 460.40 534.44 458.36 C 538.94 457.14 542.86 460.46 546.07 463.14 C 584.87 495.55 623.74 527.88 662.44 560.41 C 666.28 563.31 669.10 567.99 668.17 572.95 C 667.79 576.51 665.63 579.53 662.92 581.73 C 624.11 613.97 585.33 646.26 546.62 678.62 C 543.22 681.54 539.54 684.96 534.69 684.54 C 531.61 682.32 530.64 678.60 530.80 674.97 C 530.79 653.78 530.75 632.59 530.82 611.39 C 471.89 611.54 412.95 611.41 354.02 611.45 C 337.79 611.38 321.56 611.61 305.34 611.34 C 305.62 632.20 305.36 653.08 305.47 673.95 C 305.29 677.49 305.72 682.28 301.89 684.08 C 298.41 685.39 294.99 682.82 292.40 680.72 C 252.84 647.64 213.18 614.66 173.54 581.67 C 169.40 578.60 167.29 573.15 168.43 568.12 C 169.35 564.58 172.15 562.02 174.83 559.73 C 213.89 527.02 252.98 494.36 292.12 461.75 Z\" />\n    </g>\n  </svg>\n)\n\nconst threedot = (\n  <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 32.055 32.055\">\n    <g>\n      <path d=\"M3.968,12.061C1.775,12.061,0,13.835,0,16.027c0,2.192,1.773,3.967,3.968,3.967c2.189,0,3.966-1.772,3.966-3.967\n        C7.934,13.835,6.157,12.061,3.968,12.061z M16.233,12.061c-2.188,0-3.968,1.773-3.968,3.965c0,2.192,1.778,3.967,3.968,3.967\n        s3.97-1.772,3.97-3.967C20.201,13.835,18.423,12.061,16.233,12.061z M28.09,12.061c-2.192,0-3.969,1.774-3.969,3.967\n        c0,2.19,1.774,3.965,3.969,3.965c2.188,0,3.965-1.772,3.965-3.965S30.278,12.061,28.09,12.061z\"/>\n    </g>\n  </svg>\n)\n\nconst doublearrow = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 245.035 245.035\"  width=\"512px\" height=\"512px\">\n    <g>\n      <g>\n        <g>\n          <path d=\"M27.269,123.841l95.22-84.255l95.22,84.255c6.229,6.229,16.4,6.229,22.597,0     c6.293-6.229,6.293-16.336,0.064-22.597L134.027,7.2c-3.178-3.178-7.342-4.704-11.505-4.64c-4.195-0.064-8.359,1.462-11.537,4.64     L4.672,101.244c-6.229,6.229-6.229,16.368,0,22.597S21.04,130.071,27.269,123.841z\" fill=\"#FFFFFF\"/>\n          <path d=\"M134.027,121.172c-3.178-3.178-7.342-4.704-11.505-4.64c-4.195-0.064-8.359,1.462-11.537,4.64     L4.672,215.184c-6.229,6.261-6.229,16.4,0,22.597c6.229,6.261,16.368,6.261,22.597,0l95.22-84.192l95.22,84.192     c6.229,6.261,16.4,6.261,22.597,0c6.229-6.198,6.229-16.336,0-22.597L134.027,121.172z\" fill=\"#FFFFFF\"/>\n        </g>\n      </g>\n    </g>\n  </svg>\n)\n\nconst rotatephone = (\n  <svg width=\"225pt\" height=\"225pt\" viewBox=\"0 0 225 225\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n    <g className=\"primary\">\n      <path d=\" M 99.84 0.00 L 205.40 0.00 C 215.63 1.10 224.07 9.79 225.00 20.02 L 225.00 205.37 C 223.85 215.54 215.30 224.12 205.05 225.00 L 99.47 225.00 C 92.33 224.04 85.85 219.67 82.46 213.30 C 80.83 209.78 79.87 205.96 80.00 202.06 C 80.03 164.98 80.00 127.90 80.02 90.81 C 80.02 87.21 80.02 83.62 80.02 80.02 C 80.00 62.67 80.02 45.31 80.01 27.96 C 80.02 23.38 79.67 18.63 81.35 14.27 C 84.13 6.47 91.66 0.88 99.84 0.00 M 98.17 11.30 C 93.77 12.84 90.46 17.29 90.76 22.03 C 90.76 82.35 90.75 142.67 90.76 202.98 C 90.41 209.05 95.92 214.68 102.05 214.21 C 135.69 214.26 169.34 214.26 202.99 214.21 C 209.11 214.61 214.60 209.03 214.24 202.94 C 214.29 142.65 214.30 82.35 214.24 22.06 C 214.58 15.98 209.07 10.36 202.95 10.79 C 170.64 10.71 138.33 10.80 106.02 10.74 C 103.40 10.77 100.73 10.63 98.17 11.30 Z\" />\n      <path d=\" M 38.90 27.05 C 36.34 23.95 38.86 18.48 42.97 18.71 C 48.66 19.07 54.31 20.04 59.97 20.76 C 62.93 20.90 65.35 23.95 64.83 26.87 C 63.97 32.58 63.46 38.35 62.49 44.04 C 61.56 48.17 55.50 49.15 53.13 45.75 C 51.49 43.71 52.15 41.04 52.33 38.66 C 43.41 45.21 35.47 52.97 28.37 61.42 C 24.43 66.12 16.68 60.03 20.05 55.04 C 27.31 45.23 36.73 37.31 46.12 29.64 C 43.61 29.21 40.46 29.51 38.90 27.05 Z\" />\n      <path d=\" M 126.32 19.43 C 142.53 19.05 158.76 19.41 174.98 19.25 C 177.54 19.23 180.85 19.12 182.27 21.74 C 184.63 24.94 182.03 29.97 178.09 29.98 C 161.40 30.05 144.71 29.96 128.02 30.02 C 125.07 30.41 121.91 28.05 121.88 25.00 C 121.63 22.38 123.64 19.67 126.32 19.43 Z\" />\n      <path d=\" M 148.48 167.61 C 159.26 164.76 171.01 173.85 171.08 184.99 C 171.78 195.03 162.99 204.40 152.92 204.34 C 143.64 204.83 135.01 197.26 134.05 188.07 C 132.67 178.87 139.38 169.44 148.48 167.61 M 149.38 178.49 C 144.17 180.53 142.91 188.23 147.31 191.73 C 151.63 195.92 159.68 192.90 160.32 186.95 C 161.50 181.08 154.78 175.91 149.38 178.49 Z\" />\n    </g>\n    <g className=\"secondary\">\n      <path d=\" M 7.45 85.43 C 11.63 81.58 17.37 79.85 22.99 79.99 C 42.00 80.04 61.01 80.00 80.02 80.02 C 80.02 83.62 80.02 87.21 80.02 90.81 C 60.67 90.83 41.32 90.78 21.98 90.83 C 18.02 90.60 14.21 92.81 12.22 96.19 C 10.69 98.50 10.79 101.38 10.73 104.04 C 10.83 137.02 10.71 170.00 10.79 202.98 C 10.41 209.05 15.89 214.60 21.98 214.17 C 42.09 214.21 62.20 214.18 82.31 214.19 L 82.46 213.30 C 85.85 219.67 92.33 224.04 99.47 225.00 L 17.58 225.00 C 13.54 223.49 9.35 221.84 6.36 218.60 C 3.08 215.43 1.28 211.13 0.00 206.84 L 0.00 97.56 C 1.63 93.08 3.65 88.51 7.45 85.43 Z\" />\n      <path d=\" M 22.25 122.37 C 25.49 120.66 29.94 123.22 29.96 126.89 C 30.03 143.94 30.02 161.00 29.97 178.05 C 30.09 182.02 24.96 184.57 21.77 182.34 C 19.51 181.06 19.21 178.28 19.26 175.96 C 19.28 159.96 19.26 143.97 19.27 127.97 C 19.10 125.73 20.18 123.37 22.25 122.37 Z\" />\n    </g>\n  </svg>\n)\n\nconst angle = (\n  <svg width=\"532pt\" height=\"532pt\" viewBox=\"0 0 532 532\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n    <g>\n    <path d=\" M 20.53 157.47 C 31.07 150.40 44.66 147.94 56.97 151.12 C 63.64 152.56 69.51 156.21 75.14 159.90 C 138.76 200.52 202.37 241.14 265.99 281.75 C 331.04 240.21 396.10 198.69 461.16 157.15 C 465.97 153.99 471.36 151.70 477.04 150.68 C 493.47 147.13 511.49 153.85 521.88 167.00 C 527.99 174.56 531.46 184.03 532.00 193.72 L 532.00 196.99 C 531.49 209.60 525.81 221.99 516.15 230.19 C 510.80 234.69 504.64 238.05 498.84 241.91 C 429.51 286.23 360.18 330.58 290.85 374.91 C 276.23 384.61 255.76 384.65 241.15 374.91 C 168.14 328.22 95.13 281.54 22.13 234.85 C 8.90 227.24 0.54 212.36 0.00 197.21 L 0.00 192.39 C 1.30 178.55 8.64 164.97 20.53 157.47 Z\" />\n    </g>\n  </svg>\n)\n\nconst hamburger = (\n  <svg width=\"512pt\" height=\"512pt\" viewBox=\"0 0 512 512\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n    <g>\n      <path d=\" M 239.35 9.43 C 274.65 8.70 310.03 10.37 345.05 14.90 C 365.95 17.98 387.03 21.92 406.42 30.62 C 426.98 39.82 444.73 54.71 458.33 72.58 C 471.78 90.23 481.42 110.65 487.27 132.03 C 498.85 179.03 501.54 227.72 500.56 275.97 C 499.83 303.41 497.12 330.84 491.80 357.78 C 488.62 374.39 484.75 391.05 477.35 406.35 C 463.41 436.90 440.01 463.93 409.35 478.45 C 389.47 488.01 367.50 491.91 345.87 495.21 C 297.39 501.60 248.24 502.80 199.48 499.21 C 172.34 497.00 145.02 494.04 118.90 486.04 C 95.99 479.06 75.03 465.85 58.98 448.05 C 38.37 425.45 24.37 396.93 18.63 366.91 C 11.03 331.83 7.98 295.86 7.75 260.00 C 7.03 220.81 10.20 181.45 18.57 143.12 C 24.72 113.24 38.56 84.78 59.13 62.18 C 73.64 46.23 92.08 33.91 112.37 26.63 C 135.49 18.72 159.83 15.35 184.03 12.77 C 202.42 10.98 220.88 9.83 239.35 9.43 M 227.17 42.18 C 200.23 43.37 173.25 45.58 146.77 50.83 C 132.87 53.66 118.87 57.37 106.59 64.71 C 83.70 78.31 66.98 100.70 57.28 125.23 C 51.77 137.89 49.51 151.61 46.88 165.07 C 41.44 195.72 39.58 226.90 39.94 258.00 C 39.71 296.02 43.23 334.23 52.50 371.16 C 58.45 391.38 68.48 410.56 82.72 426.19 C 94.93 439.52 110.52 449.99 127.99 454.97 C 145.33 460.01 163.24 462.80 181.16 464.83 C 231.96 470.42 283.39 470.19 334.13 464.05 C 353.15 461.45 372.43 458.61 390.35 451.44 C 411.54 442.71 428.71 425.98 440.50 406.57 C 448.75 392.79 455.16 377.74 458.18 361.92 C 468.50 316.73 469.55 270.07 467.95 223.94 C 466.54 195.04 462.77 166.20 455.62 138.14 C 446.82 108.68 428.85 80.89 402.09 64.87 C 389.03 56.96 374.01 53.33 359.19 50.39 C 347.93 48.22 336.56 46.61 325.16 45.40 C 292.63 42.03 259.85 40.71 227.17 42.18 Z\" />\n      <path d=\" M 150.50 147.67 C 152.28 147.11 154.15 146.96 156.00 146.92 C 221.33 146.93 286.65 146.95 351.98 146.92 C 358.92 146.76 365.83 151.08 368.35 157.63 C 371.31 164.63 369.20 173.47 363.08 178.10 C 359.97 180.59 355.98 181.82 352.01 181.76 C 288.67 181.79 225.33 181.75 161.99 181.78 C 158.29 181.73 154.48 182.10 150.86 181.06 C 143.85 179.07 138.46 172.37 138.25 165.05 C 137.72 157.34 143.11 149.83 150.50 147.67 Z\" />\n      <path d=\" M 153.43 236.70 C 219.61 236.33 285.82 236.65 352.02 236.54 C 361.94 235.86 370.64 245.35 369.62 255.12 C 369.31 264.11 361.05 271.69 352.09 271.36 C 286.72 271.36 221.36 271.38 156.00 271.35 C 147.60 271.76 139.60 265.18 138.47 256.84 C 136.63 247.46 143.85 237.54 153.43 236.70 Z\" />\n      <path d=\" M 150.31 329.48 C 153.42 328.49 156.72 328.71 159.94 328.70 C 224.28 328.70 288.63 328.70 352.97 328.69 C 357.93 328.78 362.79 331.11 365.96 334.93 C 371.39 341.45 370.86 351.98 365.00 358.06 C 361.74 361.60 356.96 363.64 352.14 363.52 C 289.10 363.52 226.06 363.53 163.01 363.52 C 157.55 363.50 151.64 364.20 146.77 361.14 C 139.34 357.04 136.24 347.11 139.52 339.38 C 141.44 334.72 145.50 330.99 150.31 329.48 Z\" />\n    </g>\n  </svg>\n)\n\nexport {\n  daterange,\n  threedot,\n  doublearrow,\n  rotatephone,\n  angle,\n  hamburger\n}","import React, { Component } from 'react';\nimport anime from 'animejs';\nimport moment from 'moment';\nimport { \n  round, \n  getNumberProperties, \n  getColorProperties, \n  glow,\n  colorMap,\n  makeDoubleDecimal,\n  getLatest\n} from '../utils';\nimport { \n  threedot,\n} from '../utils/icons';\n\nrequire('./balances.css');\n\nexport default class Balances extends Component {\n  state = {};\n  meta = {}\n\n  componentWillReceiveProps = props => {\n    // ANIMATE TRANSITIONS\n    if(this.state.showData || this.props.mobile) return;\n    const old = getLatest(this.props.data, this.props.activeDates[1]),\n          latest = getLatest(props.data, props.activeDates[1]),\n          perc = props.dataView === '%';\n    let shouldAnimate = false;\n    if(old.adj.balance !== latest.adj.balance) shouldAnimate = true;\n    if(old.ytd_contributions !== latest.ytd_contributions) shouldAnimate = true;\n    if(old.adj.pl !== latest.adj.pl) shouldAnimate = true;\n    if(this.props.feeAdjustments !== props.feeAdjustments) shouldAnimate = true;\n    if(this.props.contributionAdjustments !== props.contributionAdjustments) shouldAnimate = true;\n    if(shouldAnimate) {\n      const { balance, ytd, pl } = this.refs;\n      const anim = {\n        balance_from: getNumberProperties(balance.textContent.replace('$','')).value,\n        ytd_from: getNumberProperties(ytd.textContent.replace(perc ? '%' : '$','')).value,\n        pl_from: getNumberProperties(pl.textContent.replace(perc ? '%' : '$','')).value,\n      }\n      if(this.meta.valAnims) this.meta.valAnims.pause();\n      this.meta.valAnims = anime({\n        targets: anim, \n        balance_from: latest.adj.balance,\n        ytd_from: perc ? round(100 * latest.ytd_contributions / this.getMaxContributions(props.activeDates[1]), 0) \n                  : latest.ytd_contributions,\n        pl_from: perc ? latest.adj.plPerc : latest.adj.pl,\n        easing: 'easeOutExpo',\n        // round: 2,\n        duration: 1000,\n        update: () => {\n          if(props.dataView !== this.props.dataView) return;\n          if(anim.balance_from_history !== anim.balance_from) {\n            const valEls = balance.querySelectorAll('[data-val]');\n            const num = getNumberProperties(round(anim.balance_from, 2));\n            makeDoubleDecimal(num);\n            num.comma.split('.').forEach((n, i) => { valEls[i].innerHTML = n});\n          }\n          if(anim.ytd_from_history !== anim.ytd_from) {\n            const num = getNumberProperties(round(anim.ytd_from, 0));\n            ytd.querySelector('[data-val]').innerHTML = num.comma;\n          }\n          if(anim.pl_from_history !== anim.pl_from) {\n            if(perc) {\n              let num = round(anim.pl_from, 2);\n              if(Math.abs(latest.adj.plPerc) >= 1) num = round(num, 1);\n              if(Math.abs(latest.adj.plPerc) >= 10) num = round(num, 0);\n              pl.querySelector('[data-val]').innerHTML = num;\n            } else {\n              const num = getNumberProperties(round(anim.pl_from, 2));\n              makeDoubleDecimal(num);\n              const valEls = pl.querySelectorAll('[data-val]');\n              num.comma.split('.').forEach((n, i) => { valEls[i].innerHTML = n});\n            }\n          }\n          anim.balance_from_history = anim.balance_from;\n          anim.ytd_from_history = anim.ytd_from;\n          anim.pl_from_history = anim.pl_from;\n        }\n      })\n    }\n  }\n\n  getMaxContributions = date => {\n    const list = this.props.data.meta.max_contribution;\n    let pair, year = date.year();\n    while(!pair) {\n      for(let i = 0; i < list.length; i++) {\n        if(list[i][0] === year) pair = list[i];\n      }\n      year--;\n    }\n    return pair[1];\n  }\n\n  render = () => {\n    const { data, activeDates, dataView, mobile } = this.props;\n    const { showData } = this.state;\n    const perc = dataView === '%';\n    const latest = getLatest(data, activeDates[1]),\n          balance = getNumberProperties(round(latest.adj.balance, 2)),\n          // balance = getNumberProperties(round(123456.78, 2)),\n          ytd = getNumberProperties(round(latest.ytd_contributions, 2)),\n          max = getNumberProperties(round(this.getMaxContributions(activeDates[1]), 2)),\n          ytdRange = 100 * ytd.value / max.value,\n          ytdPerc = round(ytdRange, 0),\n          total = getNumberProperties(round(latest.adj.total_contributions, 2)),\n          pl = getNumberProperties(round(latest.adj.pl, 2)),\n          plPerc = round(latest.adj.plPerc, \n                         Math.abs(latest.adj.plPerc) < 1 ? 2 :\n                         Math.abs(latest.adj.plPerc) < 10 ? 1 : 0),\n          plRange = 100 * Math.abs(pl.value) / (pl.value + total.value);\n    [balance,pl].map(v => makeDoubleDecimal(v));\n    let commIndex = data.meta.commission.length - 1,\n        currComm = data.meta.commission[commIndex];\n    while(moment(currComm[0],'L').isAfter(activeDates[1])) {\n      commIndex--;\n      currComm = data.meta.commission[commIndex];\n    }\n    console.log('LATEST', latest)\n\n    const calcAge = () => {\n      const start = moment(data.meta.start_date, 'L');\n      const days = activeDates[1].diff(start, 'days'),\n            months = round(days/30, 0),\n            years = round(months/12, 0);\n      if(days <= 31) return `${days} day${days !== 1 ? 's' : ''}`;\n      if(months <= 12) return `${months} month${months !== 1 ? 's' : ''}`;\n      let text = `${years} year${years !== 1 ? 's' : ''}`;\n      if(years < 5 && months % 12 > 0) text += `, ${months % 12} month${months % 12 !== 1 ? 's' : ''}`;\n      return text;\n    }\n\n    return (\n      <div className=\"tile-container\" id=\"balances\">\n        <div \n          className={`tile ${showData ? 'show-data' : ''}`}\n          onClick={mobile ? e => this.setState({showData: !showData}) : null}\n        >\n          {\n            mobile ? null :\n            <div className=\"data-toggle\" onClick={e => this.setState({showData: !showData})}>{threedot}</div>\n          }\n          <div className=\"header\">\n            <div className=\"title\">Balances</div>\n          </div>\n          <div className=\"body\">\n            <div className=\"main\">\n              <div className=\"balance\" ref=\"balance\">\n                <span>\n                  <span className=\"dsign\">$</span>\n                  <span data-val>{balance.comma.split('.')[0]}</span>\n                </span>\n                <small>.<span data-val>{balance.comma.split('.')[1]}</span></small>\n              </div>\n              <div className=\"stats\">\n\n                <div className=\"stat\">\n                  {\n                    perc ? <div className=\"val\" ref=\"ytd\"><span data-val>{ytdPerc}</span><span className=\"psign\">%</span></div>\n                    : <div className=\"val\" ref=\"ytd\"><span className=\"dsign\">$</span><span data-val>{ytd.comma}</span></div>\n                  }\n                  <div className=\"title\">YTD Contributions</div>\n                  <div className=\"range\">\n                    <div style={{\n                      width: ytdRange + '%',\n                      background: colorMap.cash,\n                      boxShadow: glow(getColorProperties(colorMap.cash))\n                    }} />\n                  </div>\n                  <div className=\"details\">\n                    {\n                      perc ? <span><span className=\"dsign\">$</span>{ytd.comma} of max</span>\n                      : <span>{ytdPerc}<span className=\"psign\">%</span>of max</span>\n                    }\n                    <span><span className=\"dsign\">$</span>{max.comma}</span>\n                  </div>\n                </div>\n\n                <div className=\"stat\">\n                  {\n                    perc ? <div className=\"val\" ref=\"pl\"> <span data-val>{plPerc}</span><span className=\"psign\">%</span> </div>\n                    : <div className=\"val\" ref=\"pl\">\n                      <span>\n                        <span className=\"dsign\">$</span>\n                        <span data-val>{pl.comma.split('.')[0]}</span>\n                      </span>\n                      <small>.<span data-val>{pl.comma.split('.')[1]}</span></small>\n                    </div>\n                  }\n                  \n                  <div className=\"title\">{mobile ? 'P/L' : 'Earnings'} vs Principle</div>\n                  <div className=\"range\">\n                    <div style={{\n                      width: plRange + '%',\n                      background: pl.value < 0 ? colorMap.other : colorMap.tactical, // purple / green\n                      boxShadow: glow(getColorProperties(pl.value < 0 ? colorMap.other : colorMap.tactical))\n                    }} />\n                  </div>\n                  <div className=\"details\">\n                    <span>\n                      { perc ? <span className=\"dsign\">$</span> : null }\n                      { perc ? pl.comma.replace(mobile ? '' : '-','') : Math.abs(plPerc) }\n                      { perc ? null : <span className=\"psign\">%</span> }\n                      { perc ? ' ' : null }{ mobile && perc ? null : plPerc >= 0 ? 'profit' : 'loss' }\n                    </span>\n                    <span><span className=\"dsign\">$</span>{total.comma}</span>\n                  </div>\n                </div>\n\n              </div>\n            </div>\n            <div className=\"data\">\n              <div>\n\n                <div className=\"data-row label-row\">\n                  <div className=\"label thin\">Balance</div>\n                  <div className=\"label\">YTD {mobile ? 'Funding' : 'Contributions'}</div>\n                  <div className=\"label\">Total Fees</div>\n                </div>\n                <div className=\"data-row value-row\">\n                  <div className=\"thin\">${balance.comma}</div>\n                  <div>${ytd.comma}</div>\n                  <div>${makeDoubleDecimal(getNumberProperties(round(latest.total_fees, 2))).comma}</div>\n                </div>\n\n                <div className=\"data-row label-row\">\n                  <div className=\"label thin\">P/L Open</div>\n                  <div className=\"label\">Total {mobile ? 'Funding' : 'Contributions'}</div>\n                  <div className=\"label\">Commission {mobile ? null : 'Rate'}</div>\n                </div>\n                <div className=\"data-row value-row\">\n                  <div className=\"thin\">${pl.comma}</div>\n                  <div>${total.comma}</div>\n                  <div>${currComm[1]}</div>\n                </div>\n\n                <div className=\"data-row label-row\">\n                  <div className=\"label thin\">P/L Open %</div>\n                  <div className=\"label\">Max {mobile ? 'Funding' : 'Contributions'}</div>\n                  <div className=\"label\">Account Age</div>\n                </div>\n                <div className=\"data-row value-row\">\n                  <div className=\"thin\">{plPerc}%</div>\n                  <div>${max.comma}</div>\n                  <div>{calcAge()}</div>\n                </div>\n\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}","import React, { Component } from 'react';\n\n// require('./interface.css');\n\nexport default class Volatility extends Component {\n  state = {};\n  meta = {}\n\n  componentDidMount = () => {}\n\n  toggle = () => {}\n\n  render = () => {\n    return (\n      <div className=\"tile-container\" id=\"volatility\">\n        <div className=\"tile\">VOLATILITY</div>\n      </div>\n    )\n  }\n}","import React, { Component } from 'react';\nimport moment from 'moment';\nimport { \n  round, \n  formatNumber,\n  getNumberProperties, \n  getColorProperties, \n  makeDoubleDecimal,\n  glow,\n  colorMap,\n  constrain,\n  getLatest,\n} from '../utils';\n\nrequire('./breakdown.css');\n\nconst VTS = {\n  tactical: {\n    tickers: ['mdy','ief','gld'],\n    label: 'VTS Tactical',\n    allocation: .54 // 60% of 90% of total\n  },\n  aggressive: {\n    tickers: ['svxy','vixy'],\n    label: 'VTS Aggressive',\n    allocation: .18 // 20% of 90% of total\n  },\n  conservative: {\n    tickers: ['ziv','vxz'],\n    label: 'VTS Conservative',\n    allocation: .18 // 20% of 90% of total\n  }\n}\n\nexport default class Breakdown extends Component {\n  state = {\n    key: null,\n    showData: false,\n    tradeDetails: {},\n  }\n  meta = {}\n\n  componentWillMount = () => {\n    window.addEventListener('resize', this.resizeGraphs);\n    this.calcTradeDetails();\n  }\n\n  componentWillReceiveProps = props => {\n    this.calcTradeDetails(props);\n  }\n\n  componentDidUpdate = () => {\n    this.resizeGraphs();\n  }\n\n  componentWillUnmount = () => {\n    window.removeEventListener('resize', this.resizeGraphs);\n  }\n\n  getVTS = sym => {\n    return Object.keys(VTS).find(key => VTS[key].tickers.includes(sym));\n  }\n\n  calcTradeDetails = (props = this.props) => {\n    const { history, feeAdjustments } = props;\n    const tradeDetails = {};\n    history.meta.symbols_traded.forEach(sym => {\n      const key = this.getVTS(sym) || sym;\n      let dets = {\n        buys: 0, // total money spent\n        sells: 0, // total money back\n        trades: 0, // total completed trades\n        ...tradeDetails[key]\n      }\n      if(this.getVTS(sym)) dets.strat = VTS[this.getVTS(sym)].label\n      const day = moment(history.meta.start_date, 'L');\n      while(day.isSameOrBefore(props.activeDates[1], 'days')) {\n        const data = history[day.format('L')];\n        if(!data) {\n          day.add(1, 'days');\n          continue;\n        }\n\n        let adj = 0;\n        if(feeAdjustments) {\n          const coms = history.meta.commission.filter(c => moment(c[0], 'L').isSameOrBefore(day));\n          adj = coms[coms.length-1][1];\n        }\n\n        if(data.transactions) {\n          const transactions = data.transactions.filter(t => t.symbol === sym);\n          for(let i = 0; i < transactions.length; i++) {\n            const trans = transactions[i];\n            if(trans.type === 'buy') {\n              if((data.positions[sym] || {}).shares === trans.shares) dets.trades++;\n              dets.buys += Math.abs(trans.shares * trans.price) + adj;\n            }\n            if(trans.type === 'sell') dets.sells += Math.abs(trans.shares * trans.price) + adj;\n          }\n        }\n        \n        if(day.isSame(props.activeDates[1], 'days')) {\n          if(Object.keys(data.positions).includes(sym)) {\n            const currData = data.positions[sym];\n            dets.sells += currData.shares * currData.c;\n            dets = { ...dets, ...currData };\n          }\n          // calc totals\n          dets.total_pl = round(dets.sells - dets.buys, 2);\n          const perc = 100*(dets.sells - dets.buys)/dets.buys;\n          dets.total_pl_perc = round(perc, perc > 100 ? 0 : 1);\n        }\n        tradeDetails[key] = dets;\n        day.add(1, 'days');\n      }\n    });\n    this.setState({ tradeDetails });\n  }\n\n  resizeGraphs = () => {\n    const { graphs, body, svg, graphspace, keys, details } = this.refs;\n    const { display } = this.state;\n    if(!body || !graphs) return;\n\n    // resize graph container\n    const size = this.props.mobile ? Math.min(body.clientWidth, body.clientHeight) : Math.min(graphspace.clientWidth, graphspace.clientHeight);\n    graphs.style.width = size + 'px';\n    graphs.style.height = size + 'px';\n    graphs.setAttribute('data-sized', true);\n    graphs.querySelectorAll('svg').forEach(el => el.setAttribute('viewBox', `0 0 ${size} ${size}`))\n\n    // set svg viewboxes and items\n    svg.setAttribute('viewBox', `0 0 ${size} ${size}`);\n    const baseRadius = size / 2 - 10; // for stroke and glow spacing\n    [...svg.querySelectorAll('.color')].forEach(el => {\n      const i = el.getAttribute('data-index');\n      const r = constrain(baseRadius * (1 - (.15*i)), baseRadius - (18*i), baseRadius - (15*i));\n      el.setAttribute('r', Math.max(r,0));\n      el.style.strokeDasharray = 2 * Math.PI * r;\n      el.style.strokeDashoffset = parseFloat(el.style.strokeDasharray) * (1 - el.getAttribute('data-perc'));\n    });\n    [...svg.querySelectorAll('.track')].forEach((el, i) => {\n      const r = constrain(baseRadius * (1 - (.15*i)), baseRadius - (18*i), baseRadius - (15*i));\n      el.setAttribute('r', Math.max(r,0));\n    });\n    [...document.querySelectorAll('.mark')].forEach(crc => {\n      const el = crc.parentNode;\n      el.setAttribute('viewBox', `0 0 ${size} ${size}`);\n      const circle = el.querySelector('.mark');\n      const i = circle.getAttribute('data-index');\n      const r = constrain(baseRadius * (1 - (.15*i)), baseRadius - (18*i), baseRadius - (15*i));\n      circle.setAttribute('r', r);\n      circle.style.strokeDasharray = 2 * Math.PI * r;\n      circle.style.strokeDashoffset = parseFloat(circle.style.strokeDasharray) - .01;\n      el.style.transform = `rotate(${-90 + (360 * circle.getAttribute('data-perc'))}deg)`;\n    });\n  }\n\n  render = () => {\n    const { data, activeDates, mobile } = this.props;\n    const { key, showData } = this.state;\n    const latest = getLatest(data, activeDates[1]);\n\n    const positions = {\n      tactical: {\n        index: 0,\n        syms: []\n      },\n      conservative: {\n        index: 1,\n        syms: []\n      },\n      aggressive: {\n        index: 2,\n        syms: []\n      },\n      other: {\n        syms: [],\n        shares: [],\n        avgs: [],\n        dates: [],\n        index: 4,\n      },\n      cash: {\n        value: latest.cash_balance,\n        index: 3,\n      }\n    }\n    Object.keys(latest.positions).forEach(sym => {\n      const { shares, avg, since } = latest.positions[sym],\n            cost = shares * avg,\n            useOther = !this.getVTS(sym),\n            pos = positions[this.getVTS(sym) || 'other'];\n      if(useOther) {\n        pos.shares.push(shares); // remove\n        pos.avgs.push(avg); // remove\n        pos.value = (pos.value || 0) + cost; // remove\n        pos.dates.push(since); // remove \n        pos.syms.push(sym);\n      } else {\n        pos.shares = shares; // remove\n        pos.value = cost; // remove\n        pos.date = since; // remove\n        pos.syms.push(sym);\n      }\n    })\n    const total = Object.keys(positions).map(key => positions[key].value || 0).reduce((t,v) => t+v);\n    Object.keys(positions).forEach(key => { positions[key].perc = (positions[key].value || 0) / total });\n\n    const renderDetails = () => {\n      if(!key) return null;\n      if(key === 'cash') {\n        return <div className=\"group\">\n          <div className=\"row\">\n            <div style={{width: '100%', textAlign: 'center'}}>\n              <div className=\"label\">Cash Balance</div>\n              <div className=\"value\">${makeDoubleDecimal(getNumberProperties(latest.adj.cash_balance)).comma}</div>\n            </div>\n          </div>\n        </div>\n      }\n      const syms = key !== 'other' ? [key] : Object.keys(latest.positions).filter(s => !this.getVTS(s));\n      const html = syms.map(sym => {\n        const dets = this.state.tradeDetails[this.getVTS(sym) || sym];\n        return <div className=\"group\" key={sym}>\n          <div className=\"single strat\">{ dets.strat || sym.toUpperCase() }</div>\n          <div className=\"row\">\n            <div className=\"col\">\n              <div className=\"label\">Total P/L</div>\n              <div className=\"value\">${makeDoubleDecimal(getNumberProperties(dets.total_pl)).comma}</div>\n            </div>\n            <div className=\"col\">\n              <div className=\"label\">Total P/L %</div>\n              <div className=\"value\">{getNumberProperties(dets.total_pl_perc).comma}%</div>\n            </div>\n            <div className=\"col\">\n              <div className=\"label\">Total Traded</div>\n              <div className=\"value\">${makeDoubleDecimal(getNumberProperties(round(dets.buys, 2))).comma}</div>\n            </div>\n          </div>\n          {\n            !dets.shares ? null :\n            [\n              <div className=\"single date\" key=\"since\">{dets.since}</div>,\n              <div className=\"row\" key=\"r1\">\n                <div className=\"col\">\n                  <div className=\"label\">Shares</div>\n                  <div className=\"value\">{formatNumber(dets.shares,1)}</div>\n                </div>\n                <div className=\"col\">\n                  <div className=\"label\">Avg</div>\n                  <div className=\"value\">${makeDoubleDecimal(getNumberProperties(round(dets.avg, 2))).comma}</div>\n                </div>\n                <div className=\"col\">\n                  <div className=\"label\">Trade #</div>\n                  <div className=\"value\">{dets.trades}</div>\n                </div>\n              </div>,\n              <div className=\"row\" key=\"r2\">\n                <div className=\"col\">\n                  <div className=\"label\">P/L Open</div>\n                  <div className=\"value\">${makeDoubleDecimal(getNumberProperties(round(dets.shares * dets.c - dets.shares * dets.avg, 2))).comma}</div>\n                </div>\n                <div className=\"col\">\n                  <div className=\"label\">P/L Open %</div>\n                  <div className=\"value\">{getNumberProperties(round(100*(dets.shares * dets.c - dets.shares * dets.avg)/(dets.shares*dets.avg), 1)).comma}%</div>\n                </div>\n                <div className=\"col\">\n                  <div className=\"label\">Trade Cost</div>\n                  <div className=\"value\">${makeDoubleDecimal(getNumberProperties(round(dets.shares * dets.avg, 2))).comma}</div>\n                </div>\n              </div>\n            ]\n          }\n        </div>\n      })\n      return html;\n    }\n\n    const renderKeys = () => {\n      if(mobile) return null;\n      console.log(positions)\n      return <div className=\"stats-container main\" >\n        <div className=\"keys\" ref=\"keys\">\n          {\n            Object.keys(positions).sort((a,b) => positions[a].index - positions[b].index).map(pos => {\n              const active = positions[pos].perc > 0;\n\n              const renderKey = (text, sub) => {\n                return <div \n                  className={`key ${active ? 'active' : ''}`} \n                  key={text}\n                  onClick={e => this.setState({ key: pos === key ? null : pos, showData: true, slide: 1 })}\n                >\n                  <div className=\"icon\">\n                    <div style={{\n                      background: colorMap[pos], \n                      boxShadow: glow(getColorProperties(colorMap[pos]))\n                    }} />\n                  </div>\n                  <div className=\"title\">\n                    {pos}\n                    <span>{sub}</span>\n                  </div>\n                </div>\n              }\n              return renderKey(pos, active && pos !== 'cash' ? positions[pos].syms.join(', ') : null);\n            })\n          }\n        </div>\n      </div>\n    }\n\n    const renderSlides = () => {\n      return <div className=\"data\">\n        <div className=\"slides\" style={{ transform: `translateX(${-100 * this.state.slide}%)`}}>\n          <div className=\"slide\">test</div>\n          <div className=\"slide\">test2</div>\n        </div>\n      </div>\n    }\n\n    return (\n      <div className=\"tile-container\" id=\"breakdown\">\n        <div className={`tile ${showData ? 'show-data' : ''}`}>\n          <div className=\"header\">\n            <div className=\"title\">Positions</div>\n          </div>\n          <div className=\"data-toggle\" onClick={e => this.setState({ showData: false })}><span>+</span></div>\n          <div className=\"body\" ref=\"body\">\n            <div className=\"space main\" ref=\"graphspace\" onClick={mobile ? e => this.setState({ showData: true, slide: 0 }) : null}>\n              <div className=\"radial-graphs square\" ref=\"graphs\">\n                <svg ref=\"svg\">\n                  <defs>\n                    <filter id=\"glow\">\n                      <feGaussianBlur stdDeviation=\"2\" result=\"coloredBlur\"/>\n                        <feMerge>\n                          <feMergeNode in=\"coloredBlur\"/>\n                          <feMergeNode in=\"SourceGraphic\"/>\n                        </feMerge>\n                      </filter>\n                  </defs>\n                  { Object.keys(positions).map((pos, i) => <circle key={i} className=\"track\" cx=\"50%\" cy=\"50%\" />) }\n                  {\n                    Object.keys(positions).map(pos => {\n                      return <circle \n                        key={pos}\n                        className=\"color\"\n                        data-index={positions[pos].index}\n                        data-perc={Math.max(positions[pos].perc, .00001)}\n                        style={{ stroke: colorMap[pos] }}\n                        filter=\"url(#glow)\"\n                        cx=\"50%\" \n                        cy=\"50%\" \n                      />\n                    })\n                  }\n                </svg>\n                {\n                  Object.keys(positions).map(pos => {\n                    if(pos === 'cash') return null;\n                    let goal; // percent size of account\n                    if(VTS[pos]) goal = VTS[pos].allocation;\n                    else goal = 1 - Object.keys(VTS).reduce((t,v) => t + VTS[v].allocation, 0);\n\n                    // TODO make more accurate based on prices\n                    return <svg id={'mark-'+pos} key={pos}><circle \n                      className=\"mark\"\n                      data-index={positions[pos].index}\n                      data-perc={goal}\n                      style={{ stroke: goal > positions[pos].perc ? colorMap[pos] : null }}\n                      cx=\"50%\" \n                      cy=\"50%\" \n                    /></svg>\n                  })\n                }\n              </div>\n            </div>\n            \n            { renderKeys() }\n\n            { renderSlides() }\n          </div>\n        </div>\n      </div>\n    )\n  }\n}","import React, { Component } from 'react';\n\n// require('./interface.css');\n\nexport default class Charts extends Component {\n  state = {};\n  meta = {}\n\n  componentDidMount = () => {}\n\n  toggle = () => {}\n\n  render = () => {\n    return (\n      <div className=\"tile-container\" id=\"charts\">\n        <div className=\"tile\">CHARTS</div>\n      </div>\n    )\n  }\n}","import React, { Component } from 'react';\nimport anime from 'animejs';\nimport moment from 'moment';\nimport { \n  Portfolio, \n  Balances, \n  Volatility, \n  Breakdown, \n  Charts \n} from './components';\nimport {\n  pagePos,\n  frmt,\n  sepFrmt,\n} from './utils'\nimport {\n  threedot,\n  doublearrow\n} from './utils/icons';\n\nrequire('./interface.css');\n\nconst TILE_INTRO_DURATION = 1000;\nconst TILE_INTRO_DELAY = 100;\nconst SCRUBBER_TICK = 2;\nconst SCRUBBER_RANGE = 90;\nconst WEEKDAY = date => date.day() && date.day() < 6;\n\nexport default class Interface extends Component {\n  state = {\n    headerIndex: 0,\n    scrubberEnd: this.props.lastDay,\n    highlightDate: null,\n  }\n  meta = {}\n\n  componentWillMount = () => {\n    window.addEventListener('resize', this.handleResize);\n    window.addEventListener('keydown', this.handleKey);\n  }\n\n  componentDidMount = () => {\n    const isSmall = window.innerWidth <= 767;\n    this.drawScrubber();\n    this.meta.tileAnime = anime.timeline().add({\n      targets: isSmall ?\n      [\n        '#portfolio',\n        '#balances',\n        '#volatility',\n        '#breakdown',\n        '#charts',\n      ] : [\n        '#portfolio',\n        '#breakdown',\n        '#balances',\n        '#charts',\n        '#volatility',\n      ],\n      opacity: [0,1],\n      scale: [.8, 1],\n      easing: 'easeInOutSine',\n      duration: TILE_INTRO_DURATION,\n      delay: (el, i, l) => i * TILE_INTRO_DELAY\n    }).add({\n      targets: this.refs.header,\n      opacity: [0,1],\n      easing: 'easeInOutSine',\n      duration: TILE_INTRO_DURATION,\n      offset: TILE_INTRO_DELAY * 2\n    });\n    this.meta.mounted = true;\n  }\n\n  componentWillReceiveProps = props => {\n    // animation of dates in the header when adjusting dates\n    if(!this.state.headerIndex && this.props.activeDates !== props.activeDates) { // first header visible\n      const dates = this.refs.dates || document.querySelector('#header-basic .dates');\n      const years = [...dates.getElementsByClassName('year')],\n            rest = [...dates.getElementsByClassName('rest')];\n      const fromStartDate = moment(`${rest[0].textContent} ${years[0] ? years[0].textContent : this.props.lastDay.year()}`, 'MMM DD YYYY'),\n            toStartDate = rest[1] ? moment(`${rest[1].textContent} ${years[1] ? years[1].textContent : this.props.lastDay.year()}`, 'MMM DD YYYY') : fromStartDate.clone();\n      const fromDiff = props.activeDates[0].diff(fromStartDate, 'days'),\n            toDiff = props.activeDates[1].diff(toStartDate, 'days');\n      const diffs = { fromdiff: 0, todiff: 0, fromdiffhistory: 0, todiffhistory: 0 };\n      if(this.meta.dateMenuAnim) this.meta.dateMenuAnim.pause();\n      this.meta.dateMenuAnim = anime({\n        targets: diffs, \n        fromdiff: fromDiff,\n        todiff: toDiff,\n        easing: 'easeOutExpo',\n        round: 1,\n        duration: 700,\n        update: () => {\n          if(diffs.fromdiffhistory === diffs.fromdiff && diffs.todiffhistory === diffs.todiff) return;\n          const currFromDate = fromStartDate.clone().add(diffs.fromdiff, 'days'),\n                currToDate = toStartDate.clone().add(diffs.todiff, 'days');\n          if(years.length) {\n            years[0].innerHTML = ', ' + currFromDate.year();\n            if(years[1]) years[1].innerHTML = ', ' + currToDate.year();\n          }\n          rest[0].innerHTML = currFromDate.format('MMM D');\n          if(rest[1]) rest[1].innerHTML = currToDate.format('MMM D');\n          diffs.fromdiffhistory = diffs.fromdiff;\n          diffs.todiffhistory = diffs.todiff;\n        }\n      })\n    }\n  }\n\n  componentDidUpdate = () => {\n    // move selected opt backgrounds\n    const { activeDateOpt, dataView } = this.props;\n    let bg = this.refs.dateOptBg;\n    if(activeDateOpt < 0) bg.style.opacity = 0;\n    else if(!this.meta.loaded || parseFloat(bg.getAttribute('data-index')) !== activeDateOpt) {\n      const opt = this.refs.dateOpts.querySelectorAll('[data-opt]')[activeDateOpt].getBoundingClientRect();\n      const offset = this.refs.dateOpts.getBoundingClientRect().left;\n      bg.style.opacity = 1;\n      bg.style.width = opt.width+'px';\n      bg.style.height = opt.height+'px';\n      bg.style.left = (opt.left - offset)+'px';\n    }\n    bg = this.refs.appOptBg;\n    const { dvDollar, dvPerc } = this.refs;\n    const offset = this.refs.appOpts.getBoundingClientRect().left;\n    const rect = (dataView === '$' ? dvDollar : dvPerc).getBoundingClientRect();\n    bg.style.opacity = 1;\n    bg.style.width = rect.width+'px';\n    bg.style.height = rect.height+'px';\n    bg.style.left = (rect.left - offset)+'px';\n    this.meta.loaded = true;\n  }\n\n  componentWillUnmount = () => {\n    window.removeEventListener('resize', this.handleResize);\n    window.removeEventListener('keydown', this.handleKey);\n  }\n\n  handleResize = e => {\n    this.meta.canvas = null;\n    setTimeout(() => {\n      if(!this.meta.canvas) this.drawScrubber();\n    }, 50)\n  }\n\n  handleKey = e => {\n    const { onSettingsChange, onDateChange } = this.props;\n    switch(e.code) {\n      case 'Space': \n        e.preventDefault();\n        e.stopPropagation();\n        return this.changeHeader();\n      case 'KeyD': \n        if(this.state.headerIndex) this.changeHeader();\n        onSettingsChange('dataView', '$');\n        return;\n      case 'KeyP': \n        if(this.state.headerIndex) this.changeHeader();\n        onSettingsChange('dataView', '%');\n        return;\n      case 'KeyF': \n        if(this.state.headerIndex) this.changeHeader();\n        onSettingsChange('feeAdjustments', !this.props.feeAdjustments);\n        return;\n      case 'KeyA': \n        if(this.state.headerIndex) this.changeHeader();\n        onSettingsChange('contributionAdjustments', !this.props.contributionAdjustments);\n        return;\n      case 'Digit1': \n        if(this.state.headerIndex) this.changeHeader();\n        onDateChange('opt', 0);\n        return;\n      case 'Digit3': \n        if(this.state.headerIndex) this.changeHeader();\n        onDateChange('opt', 1);\n        return;\n      case 'Digit6': \n        if(this.state.headerIndex) this.changeHeader();\n        onDateChange('opt', 2);\n        return;\n      case 'KeyY': \n        if(this.state.headerIndex) this.changeHeader();\n        onDateChange('opt', 3);\n        return;\n      default: return;\n    }\n  }\n\n  changeHeader = e => {\n    const newState = {\n      headerIndex: (this.state.headerIndex + 1) % 2\n    }\n    if(newState.headerIndex === 1) {\n      this.meta.weekdays = null;\n      newState.scrubberEnd = this.meta.activeScrubberEnd || this.props.lastDay;\n    }\n    this.setState(newState, newState.headerIndex === 1 ? this.drawScrubber : null);\n  }\n\n  drawScrubber = () => {\n    if(this.state.headerIndex !== 1) return;\n    const { canvas } = this.refs, rect = canvas.getBoundingClientRect();\n    // init canvas if initial render \n    const setupCanvas = () => {\n      const dpr = window.devicePixelRatio || 1;\n      canvas.width = rect.width * dpr;\n      canvas.height = rect.height * dpr;\n      this.meta.canvas = canvas.getContext('2d');\n      this.meta.canvas.scale(dpr, dpr);\n      return this.meta.canvas;\n    }\n    const setupTicks = () => {\n      const weekdays = [];\n      const time = this.state.scrubberEnd.clone();\n      while(weekdays.length < SCRUBBER_RANGE && time.isSameOrAfter(moment(this.props.data.meta.start_date, 'L'), 'days')) {\n        if(WEEKDAY(time)) weekdays.unshift(time.format('L'));\n        time.subtract(1, 'days');\n      }\n      this.meta.weekdays = weekdays;\n      this.forceUpdate();\n      return weekdays;\n    }\n\n    // if weekdays have not been initialized or year changed\n    const weekdays = this.meta.weekdays || setupTicks();\n    // draw calendar\n    const ctx = this.meta.canvas || setupCanvas();\n    ctx.clearRect(0,0,canvas.width,canvas.height);\n    const distance = this.calcTickDistance();\n    const offset = SCRUBBER_TICK; // first one gets drawn in half\n    // ctx.globalAlpha = 0.2;\n    weekdays.forEach((day, i) => {\n      ctx.lineWidth = SCRUBBER_TICK;\n      ctx.beginPath();\n\n      const dates = this.meta.propActiveDates || this.props.activeDates;\n      if( i === this.meta.canvasHighlight ||\n         [dates[0].format('L'), dates[1].format('L')].includes(day)\n      ) {\n        ctx.strokeStyle = '#fff'\n        ctx.moveTo(distance * i + offset, rect.height * .25);\n        ctx.lineTo(distance * i + offset, rect.height);\n      } else if(moment(day, 'L').isBetween(dates[0], dates[1])) {\n        ctx.strokeStyle = 'rgba(255,255,255,0.5)';\n        ctx.moveTo(distance * i + offset, rect.height * .25);\n        ctx.lineTo(distance * i + offset, rect.height * .75);\n      } else {\n        ctx.strokeStyle = 'rgba(255,255,255,0.2)';\n        ctx.moveTo(distance * i + offset, rect.height * .25);\n        ctx.lineTo(distance * i + offset, rect.height * .75);\n      }\n      ctx.stroke();\n    })\n  }\n\n  calcTickDistance = () => {\n    const days = this.meta.weekdays.length;\n    const { canvas } = this.refs, rect = canvas.getBoundingClientRect();\n    let distance = rect.width / days;\n    // recalc width to get rid of empty space at back\n    const calcWidth = rect.width + distance - (SCRUBBER_TICK * 2);\n\n    return calcWidth / days;\n  }\n\n  scrub = e => {\n    // calc hover highlight\n    const { canvas } = this.refs;\n    if(e.target === canvas) {\n      const distance = this.calcTickDistance(), offset = SCRUBBER_TICK * .5,\n            canvasPos = pagePos(canvas);\n      canvasPos.y = canvasPos.y - document.getElementById('header-cal').clientHeight;\n      const highlight = Math.min(\n        Math.floor((e.pageX - canvasPos.x + offset) / distance), \n        this.meta.weekdays.length-1\n      );\n      if(this.meta.canvasHighlight === highlight) return;\n      const day = moment(this.meta.weekdays[highlight], 'L');\n      if(!this.meta.propActiveDates) {\n        this.meta.propActiveDates = this.props.activeDates;\n        this.meta.propActiveDateOpt = this.props.activeDateOpt;\n      }\n      this.props.onDateChange('range', [day, day]);\n      this.setState({ \n        highlightDate: frmt(day, moment())[0],\n      });\n      this.meta.canvasHighlight = highlight;\n      this.drawScrubber();\n    }\n    else if(this.meta.canvasHighlight > -1) {\n      this.setState({ highlightDate: null });\n      if(this.meta.propActiveDateOpt > -1) this.props.onDateChange('opt', this.meta.propActiveDateOpt);\n      else this.props.onDateChange('range', this.meta.propActiveDates);\n      this.meta.canvasHighlight = -1;\n      this.drawScrubber(); // draw before propActiveDates are cleared\n      this.meta.propActiveDateOpt = -1;\n      this.meta.propActiveDates = null;\n    }\n  }\n\n  scrubSelect = e => {\n    const selectedDate = moment(this.meta.weekdays[this.meta.canvasHighlight], 'L');\n    const dates = this.meta.propActiveDates;\n    if(dates[0] === dates[1] && selectedDate.format('L') === dates[0].format('L')) return;\n    if(dates[0] === dates[1]) {\n      // put the earlier date first\n      if(dates[0].isBefore(selectedDate)) {\n        this.meta.propActiveDates = [dates[0], selectedDate];\n        this.meta.activeScrubberEnd = this.state.scrubberEnd;\n      }\n      else this.meta.propActiveDates = [selectedDate, dates[0]];\n    }\n    else {\n      this.meta.propActiveDates = [selectedDate, selectedDate];\n      this.meta.activeScrubberEnd = this.state.scrubberEnd;\n    }\n    this.meta.propActiveDateOpt = -1;\n    this.props.onDateChange('range', this.meta.propActiveDates);\n    this.drawScrubber();\n  }\n\n  scrubAdjust = e => {\n    this.meta.weekdays = null;\n    let end = moment(this.state.scrubberEnd.format('L'), 'L'); // trims time\n    const mod = e.currentTarget === this.refs.scrubBackwards ? -1 : 1;\n    let diff = 0;\n    // shift by RANGE or (if upward) until last day\n    while(diff < SCRUBBER_RANGE-1 && end[mod < 0 ? 'isSameOrBefore' : 'isBefore'](this.props.lastDay, 'days')) {\n      if(WEEKDAY(end)) diff++;\n      end.add(mod, 'days');\n    }\n    // if backwards and before start_date, shift back up to fit RANGE\n    if(mod < 0) {\n      let ticks = 0;\n      const start = end.clone();\n      while(ticks < SCRUBBER_RANGE && start.isSameOrAfter(moment(this.props.data.meta.start_date, 'L'), 'days')) {\n        if(WEEKDAY(start)) ticks++;\n        start.subtract(1, 'days');\n      }\n      if(ticks < SCRUBBER_RANGE) { // start date was hit\n        diff = 0;\n        end = moment(this.props.data.meta.start_date, 'L');\n        // shift by RANGE or (if upward) until last day\n        while(diff < SCRUBBER_RANGE-1 && end.isSameOrBefore(this.props.lastDay, 'days')) {\n          if(WEEKDAY(end)) diff++;\n          end.add(1, 'days');\n        }\n      }\n    }\n    this.setState({ scrubberEnd: end }, this.drawScrubber)\n  }\n\n  render = () => {\n    const { \n      headerIndex,\n      highlightDate\n    } = this.state;\n    const {\n      weekdays // hover\n    } = this.meta;\n    const {\n      activeDates,\n      dataView,\n      feeAdjustments,\n      contributionAdjustments,\n      onSettingsChange,\n      onDateChange\n    } = this.props;\n\n    const renderDates = useRef => {\n      const fmt = sepFrmt(activeDates[0], activeDates[1]);\n      const props = {};\n      if(useRef) props.ref = 'dates';\n      else if(highlightDate) return <div className=\"dates\">{highlightDate}</div>;\n      if(activeDates[0] === activeDates[1]) return (\n        <div className=\"dates\" {...props} key={highlightDate}>\n          <span className=\"rest\">{fmt[0].m} {fmt[0].d}</span> \n          {fmt[0].useYear ? <span className=\"year\">, {fmt[0].y}</span> : null}\n        </div>\n      );\n      return (\n        <div className=\"dates\" {...props} key={highlightDate}>\n          <span className=\"rest\">{fmt[0].m} {fmt[0].d}</span> \n          {fmt[0].useYear ? <span className=\"year\">, {fmt[0].y}</span> : null}\n          {` - `}\n          <span className=\"rest\">{fmt[1].m} {fmt[1].d}</span> \n          {fmt[1].useYear ? <span className=\"year\">, {fmt[1].y}</span> : null}\n        </div>\n      )\n    }\n\n    return (\n      <div className=\"interface\">\n        <div className=\"bg\" />\n        \n        <div ref=\"header\" className=\"interface-header\">\n          <div className=\"header-slider\" data-slide={headerIndex}>\n            <section id=\"header-basic\">\n              <div className=\"header-left\">\n                <ul ref=\"appOpts\" className=\"app-opts\">\n                  <div ref=\"appOptBg\" className=\"bg\" data-index={-1} />\n                  <li \n                    className={`icon ${dataView === '$' ? 'active' : ''}`}\n                    ref=\"dvDollar\"\n                    title=\"Use dollar change\"\n                    onClick={dataView === '$' ? null : () => onSettingsChange('dataView', '$')}\n                  ><div className=\"clickitem\">$</div></li>\n                  <li \n                    className={`icon ${dataView === '%' ? 'active' : ''}`}\n                    ref=\"dvPerc\"\n                    title=\"Use percent change\"\n                    onClick={dataView === '%' ? null : () => onSettingsChange('dataView', '%')}\n                  ><div className=\"clickitem\">%</div></li>\n                  <li className=\"divider\" />\n                  <li \n                    className={`single ${feeAdjustments ? 'active' : ''}`}\n                    title=\"Toggle fee-adjusted values\"\n                    onClick={() => onSettingsChange('feeAdjustments', !feeAdjustments)}\n                  ><div className=\"clickitem\">Fees</div></li>\n                  <li \n                    className={`single ${contributionAdjustments ? 'active' : ''}`}\n                    title=\"Toggle backwards contribution adjustments\"\n                    onClick={() => onSettingsChange('contributionAdjustments', !contributionAdjustments)}\n                  ><div className=\"clickitem\">Adj</div></li>\n                </ul>\n              </div>\n              {renderDates(true)}\n              <div className=\"header-right\">\n                <ul ref=\"dateOpts\" className=\"date-opts\">\n                  <div ref=\"dateOptBg\" className=\"bg\" data-index={-1} />\n                  {\n                    this.props.dateOpts.map((opt, i) => {\n                      const active = this.props.activeDateOpt === i,\n                            formatted = frmt(opt.start, opt.end);\n                      const range = `${formatted[0]} - ${formatted[1]}`;\n                      return <li \n                        key={i}\n                        className={active ? 'active' : ''}\n                        data-opt={i}\n                        title={range}\n                        onClick={active ? null : () => onDateChange('opt', i)}\n                      ><div className=\"clickitem\">{opt.range_count}<span>{opt.range_type}</span></div></li>\n                    })\n                  }\n                </ul>\n              </div>\n            </section>\n            <section id=\"header-cal\" onMouseMove={this.scrub}>\n              <div className=\"scrubber\" ref=\"scrubber\">\n                {renderDates()}\n                <canvas ref=\"canvas\" onClick={this.scrubSelect} />\n                <div \n                  className={`arrow backwards ${weekdays && weekdays[0] === this.props.data.meta.start_date ? 'disabled' : ''}`} \n                  ref=\"scrubBackwards\" \n                  onClick={this.scrubAdjust}\n                >\n                  <span className=\"clickitem\">{doublearrow}</span>\n                </div>\n                <div \n                  className={`arrow forwards ${weekdays && weekdays[weekdays.length-1] === this.props.lastDay.format('L') ? 'disabled' : ''}`} \n                  ref=\"scrubForwards\" \n                  onClick={this.scrubAdjust}\n                >\n                  <span className=\"clickitem\">{doublearrow}</span>\n                </div>\n                {\n                  !weekdays ? null : [\n                    <div key=\"from\" className=\"from\">{frmt(moment(weekdays[0], 'L'), moment(weekdays[weekdays.length-1], 'L'))[0]}</div>,\n                    <div key=\"to\" className=\"to\">{frmt(moment(weekdays[0], 'L'), moment(weekdays[weekdays.length-1], 'L'))[1]}</div>\n                  ]\n                }\n              </div>\n            </section>\n          </div>\n          <div\n            className=\"menu-icon\"\n            onClick={this.changeHeader}\n          ><div className=\"clickitem\">{threedot}</div></div>\n        </div>\n\n        <div className=\"interface-content\" onMouseEnter={this.scrub}>\n          <section className=\"tile-col left\">\n            {\n              <Portfolio {...this.props} />\n            }\n            <Balances {...this.props} />\n            {\n              <Volatility {...this.props} />\n            }\n          </section>\n          <section className=\"tile-col right\">\n            <Breakdown {...this.props} />\n            <Charts {...this.props} />\n          </section>\n        </div>\n      </div>\n    )\n  }\n\n}","import React, { Component } from 'react';\nimport anime from 'animejs';\nimport Swipe from 'swipejs';\nimport moment from 'moment';\nimport { \n  Portfolio, \n  Balances, \n  Volatility, \n  Breakdown, \n  Charts \n} from './components';\nimport {\n  frmt,\n  sepFrmt,\n  getAlpha,\n  p5map,\n} from './utils';\nimport {\n  angle,\n} from './utils/icons';\n\nrequire('./interface.css');\n\nconst TILE_INTRO_DURATION = 500;\nconst TILE_INTRO_DELAY = 200;\nconst MENU_BG = 0.6;\n\nexport default class InterfaceMobile extends Component {\n  state = {};\n  meta = {\n    swipe: {\n      acctIndex: 1,\n      posIndex: 1\n    }\n  }\n\n  componentWillMount = () => {\n    this.meta.app = document.getElementById('app');\n  }\n\n  componentDidMount = () => {\n    const processSlides = (index, slides) => {\n      const width = parseFloat(slides[0].style.width);\n      slides[index].children[0].style.transform = 'scale(1)';\n      \n      // scrolling to the first, 2+ should be hidden\n      if(!index) {\n        for(let i=index+2; i<slides.length; i++) {\n          slides[i].style.transform = `translate(${width * 2}px, 0px) translateZ(0px)`;\n          slides[i].style.transitionDuration = '400ms';\n          slides[i].children[0].style.transform = 'scale(.8)';\n          slides[i].children[0].style.transformOrigin = 'left center';\n        }\n        slides[1].children[0].style.transform = 'scale(.8)';\n        slides[1].children[0].style.transformOrigin = 'left center';\n      }\n      // scrolling to anything after second slide, anything before previous should be hidden\n      if(index > 1) {\n        for(let i=index-2; i>=0; i--) {\n          slides[i].style.transform = `translate(${width * -2}px, 0px) translateZ(0px)`;\n          slides[i].style.transitionDuration = '400ms';\n          slides[i].children[0].style.transform = 'scale(.8)';\n          slides[i].children[0].style.transformOrigin = 'right center';\n        }\n        slides[index-1].children[0].style.transform = 'scale(.8)';\n        slides[index-1].children[0].style.transformOrigin = 'right center';\n      }\n      if(index === 1) {\n        slides[0].style.transform = `translate(${width * -1}px, 0px) translateZ(0px)`;\n        slides[0].style.transitionDuration = '400ms';\n        slides[0].children[0].style.transform = 'scale(.8)';\n        slides[0].children[0].style.transformOrigin = 'right center';\n        if(slides[2]) {\n          slides[2].style.transform = `translate(${width}px, 0px) translateZ(0px)`;\n          slides[2].style.transitionDuration = '400ms';\n          slides[2].children[0].style.transform = 'scale(.8)';\n          slides[2].children[0].style.transformOrigin = 'left center';\n        }\n      }\n    }\n\n    // init Swipe instances\n    this.meta.swipe.acct = new Swipe(this.refs.account, {\n      startSlide: this.meta.swipe.acctIndex,\n      speed: 400,\n      draggable: true,\n      continuous: false,\n      disableScroll: true,\n      stopPropagation: true,\n      callback: (index, el, dir) => {\n        this.meta.swipe.acctIndex = index;\n        processSlides(index, [...this.refs.account.querySelectorAll('.swipe-wrap > div')]);\n      },\n    });\n    this.meta.swipe.pos = new Swipe(this.refs.positions, {\n      startSlide: this.meta.swipe.posIndex,\n      speed: 400,\n      draggable: true,\n      continuous: false,\n      disableScroll: true,\n      stopPropagation: true,\n      callback: (index, el, dir) => {\n        this.meta.swipe.posIndex = index;\n        processSlides(index, [...this.refs.positions.querySelectorAll('.swipe-wrap > div')])\n      },\n    });\n\n    //initialize transforms\n    processSlides(this.meta.swipe.acctIndex, [...this.refs.account.querySelectorAll('.swipe-wrap > div')]);\n    processSlides(this.meta.swipe.posIndex, [...this.refs.positions.querySelectorAll('.swipe-wrap > div')]);\n\n    // animate in\n    if(this.meta.tileAnime) this.meta.tileAnime.pause();\n    this.meta.tileAnime = anime.timeline().add({\n      targets: [\n        '#balances',\n        '#charts',\n      ],\n      opacity: [0,1],\n      marginTop: [20,0],\n      easing: 'easeInOutSine',\n      duration: TILE_INTRO_DURATION,\n      delay: (el, i, l) => i * TILE_INTRO_DELAY\n    }).add({\n      targets: [\n        '#portfolio',\n        '#volatility',\n        '#breakdown'\n      ],\n      opacity: [0,1],\n      offset: '-='+TILE_INTRO_DURATION,\n      easing: 'easeInOutSine',\n      duration: TILE_INTRO_DURATION,\n      delay: (el, i, l) => i * TILE_INTRO_DELAY\n    });\n  }\n\n  componentWillReceiveProps = props => {\n    // animation of dates in the menu when adjusting dates\n    if(this.refs.menu.classList.contains('show')) {\n      const fromElDay = this.refs.menu.querySelector('.from .big'),\n            fromElRest = this.refs.menu.querySelector('.from .small'),\n            toElDay = this.refs.menu.querySelector('.to .big'),\n            toElRest = this.refs.menu.querySelector('.to .small');\n      const fromStartDate = moment(`${fromElRest.textContent} ${fromElDay.textContent}`, 'MMM YYYY DD'),\n            toStartDate = moment(`${toElRest.textContent} ${toElDay.textContent}`, 'MMM YYYY DD');\n      const fromDiff = props.activeDates[0].diff(fromStartDate, 'days'),\n            toDiff = props.activeDates[1].diff(toStartDate, 'days');\n      const diffs = { fromdiff: 0, todiff: 0, fromdiffhistory: 0, todiffhistory: 0 };\n      this.meta.dateMenuAnim = anime({\n        targets: diffs, \n        fromdiff: fromDiff,\n        todiff: toDiff,\n        easing: 'easeOutExpo',\n        round: 1,\n        duration: 1000,\n        update: () => {\n          if(diffs.fromdiffhistory === diffs.fromdiff && diffs.todiffhistory === diffs.todiff) return;\n          const currFromDate = fromStartDate.clone().add(diffs.fromdiff, 'days'),\n                currToDate = toStartDate.clone().add(diffs.todiff, 'days');\n          fromElDay.innerHTML = currFromDate.date();\n          fromElRest.innerHTML = currFromDate.format('MMM YYYY');\n          toElDay.innerHTML = currToDate.date();\n          toElRest.innerHTML = currToDate.format('MMM YYYY');\n          diffs.fromdiffhistory = diffs.fromdiff;\n          diffs.todiffhistory = diffs.todiff;\n        }\n      })\n    }\n  }\n\n  moveHeaderStart = e => {\n    if(!e || (!e.pageY && !e.touches)) return;\n    const y = e.pageY || (e.touches[0].clientY - 20);\n    this.refs.menu.style.transitionDuration = '0s';\n    this.refs.interface.style.transitionDuration = '0s';\n    this.meta.app.style.transitionDuration = '0s';\n    this.refs.menu.style.transitionTimingFunction = null;\n    this.refs.interface.style.transitionTimingFunction = null;\n    if(!this.meta.app.hasAttribute('data-bg')) {\n      this.meta.app.setAttribute('data-bg', this.meta.app.style.background);\n    }\n    this.meta.drag = {\n      y,\n      alpha: getAlpha(this.meta.app.getAttribute('data-bg')),\n      menuOpen: this.refs.menu.classList.contains('show'),\n      time: performance.now()\n    }\n  }\n\n  moveHeader = e => {\n    const { drag } = this.meta;\n    if(!drag || !e || (!e.pageY && !e.touches)) return;\n    e.preventDefault();\n    const y = e.pageY || (e.touches[0].clientY - 20);\n    if(y < 0) return;\n    if(drag.menuOpen) { // relative to start point\n      drag.diff = drag.y - y;\n      if(drag.diff < 0) {\n        drag.diff = 0;\n        drag.y = y;\n        drag.time = performance.now();\n      }\n      this.refs.menu.style.top = `-${drag.diff}px`;\n      this.refs.interface.style.top = `calc(100vh - ${drag.diff}px)`;\n      const appbg = p5map(drag.diff, 0, window.screen.height, MENU_BG, drag.alpha);\n      const blur = Math.max(p5map(drag.diff, window.screen.height / 4, window.screen.height / 2, 0, 10), 0);\n      this.meta.app.style.background = `rgba(0,0,0,${appbg})`;\n      this.refs.menu.style.filter = `blur(${blur}px)`;\n    } else { // exact position on screen\n      this.refs.interface.style.top = y + 'px';\n      this.refs.menu.style.top = `calc(-100vh + ${y}px)`;\n      const appbg = p5map(y, 0, window.screen.height, drag.alpha, MENU_BG);\n      const blur = Math.max(p5map(y, 0, window.screen.height / 2, 10, 0), 0);\n      this.meta.app.style.background = `rgba(0,0,0,${appbg})`;\n      this.refs.menu.style.filter = `blur(${blur}px)`;\n    }\n  }\n\n  moveHeaderEnd = e => {\n    if(!this.meta.drag) return;\n    const fast = performance.now() - this.meta.drag.time < 200;\n    if(this.meta.drag.menuOpen) { // hide menu\n      if( (fast && this.meta.drag.diff > window.screen.height * 0.1) ||\n          this.meta.drag.diff > window.screen.height / 4\n      ) {\n        this.hideMenu(fast);\n      } else {\n        this.refs.menu.style.transitionDuration = '0.15s'; // faster speed for short distance\n        this.refs.interface.style.transitionDuration = '0.15s';\n        this.meta.app.style.transitionDuration = '0.15s';\n        this.refs.menu.style.top = 0;\n        this.refs.interface.style.top = '100vh';\n        this.meta.app.style.background = `rgba(0,0,0,${MENU_BG})`;\n        this.refs.menu.style.filter = 'blur(0px)';\n      }\n    } else { // show menu\n      if( (fast && parseFloat(this.refs.interface.style.top) >= window.screen.height / 5) ||\n          parseFloat(this.refs.interface.style.top) >= window.screen.height / 3\n      ) {\n        this.showMenu(fast);\n      } else {\n        this.refs.menu.style.transitionDuration = '0.15s'; // faster speed for short distance\n        this.refs.interface.style.transitionDuration = '0.15s';\n        this.meta.app.style.transitionDuration = '0.15s';\n        this.refs.menu.style.top = null;\n        this.refs.interface.style.top = null;\n        this.meta.app.style.background = `rgba(0,0,0,${this.meta.drag.alpha})`;\n        this.refs.menu.style.filter = 'blur(10px)';\n      }\n    }\n    this.meta.drag = null;\n  }\n\n  showMenu = fast => {\n    if(fast) {\n      this.refs.menu.style.transitionTimingFunction = 'cubic-bezier(0.175, 0.885, 0.32, 1.275)';\n      this.refs.interface.style.transitionTimingFunction = 'cubic-bezier(0.175, 0.885, 0.32, 1.275)';\n    } \n    this.refs.menu.style.transitionDuration = null; // slower, original speed\n    this.refs.interface.style.transitionDuration = null;\n    this.meta.app.style.transitionDuration = null;\n    this.refs.menu.classList.add('show');\n    this.refs.menu.style.top = 0;\n    this.refs.interface.style.top = '100vh';\n    this.refs.menu.style.filter = 'blur(0px)';\n    this.meta.app.style.background = `rgba(0,0,0,${MENU_BG})`;\n  }\n\n  hideMenu = fast => {\n    if(fast) {\n      this.refs.menu.style.transitionTimingFunction = 'cubic-bezier(0.175, 0.885, 0.32, 1.275)';\n      this.refs.interface.style.transitionTimingFunction = 'cubic-bezier(0.175, 0.885, 0.32, 1.275)';\n    }\n    this.refs.menu.style.transitionDuration = null; // slower, original speed\n    this.refs.interface.style.transitionDuration = null;\n    this.meta.app.style.transitionDuration = null;\n    this.refs.menu.classList.remove('show');\n    this.refs.menu.style.top = null;\n    this.refs.interface.style.top = null;\n    this.meta.app.style.background = this.meta.app.getAttribute('data-bg');\n    this.refs.menu.style.filter = 'blur(10px)';\n  }\n\n  dateChange = e => {\n    if(!e.target.value) return;\n    let dateFrom = moment(this.refs.from.value, 'YYYY-MM-DD'),\n        dateTo = moment(this.refs.to.value, 'YYYY-MM-DD'),\n        changed = e.target === this.refs.from ? 0 : 1;\n    // limit dates\n    const min = moment(this.props.data.meta.start_date, 'L'),\n          max = moment(this.props.lastDay, 'L');\n    if(dateFrom.isBefore(min)) dateFrom = min;\n    if(dateTo.isAfter(max)) dateTo = max;\n    let range = [dateFrom, dateTo];\n    // keep in min -> max order\n    if(dateFrom.isAfter(dateTo)) {\n      if(changed) {\n        if(dateTo.isBefore(min)) dateTo = min;\n        range = [dateTo, dateTo];\n      } else {\n        if(dateFrom.isAfter(max)) dateFrom = max;\n        range = [dateFrom, dateFrom];\n      }\n    }\n    this.props.onDateChange('range', range);\n  }\n\n  render = () => {\n    const dateFrom = this.props.activeDates[0],\n          dateTo = this.props.activeDates[1],\n          formatted = frmt(dateFrom, dateTo),\n          sep = sepFrmt(dateFrom, dateTo),\n          datesRender = (dateFrom === dateTo ? formatted[0] : `${formatted[0]} - ${formatted[1]}`);\n\n    return [\n      <div \n        className=\"interface\" \n        key=\"interface\"\n        ref=\"interface\"\n        onTouchStart={this.moveHeaderStart} \n        onTouchMove={this.moveHeader} \n        onTouchEnd={this.moveHeaderEnd}\n        onMouseDown={this.moveHeaderStart}\n        onMouseMove={this.moveHeader}\n        onMouseUp={this.moveHeaderEnd}\n      >\n        <div className=\"bg\" />\n\n        <div className=\"interface-header\" ref=\"header\" onClick={this.showMenu}>\n          <div className=\"dates\">{datesRender}</div>\n        </div>\n\n        <div className=\"interface-content\" ref=\"content\">\n          <section>\n            <div className=\"swipe-shrink\">\n              <div ref=\"account\" className=\"swipe\">\n                <div className=\"swipe-wrap\">\n                  <div style={{transform: 'scale(0.8)', transformOrigin: 'right center'}}><Portfolio mobile {...this.props} /></div>\n                  <div><Balances mobile {...this.props} /></div>\n                  <div style={{transform: 'scale(0.8)', transformOrigin: 'left center'}}><Volatility mobile {...this.props} /></div>\n                </div>\n              </div>\n            </div>\n          </section>\n          <section>\n            <div className=\"swipe-shrink\">\n              <div ref=\"positions\" className=\"swipe\">\n                <div className=\"swipe-wrap\">\n                  <div style={{transform: 'scale(0.8)', transformOrigin: 'right center'}}><Breakdown mobile {...this.props} /></div>\n                  <div><Charts mobile {...this.props} /></div>\n                </div>\n              </div>\n            </div>\n          </section>\n        </div>\n      </div>,\n      <div\n        className=\"mobile-menu\"\n        ref=\"menu\"\n        key=\"menu\"\n        onTouchStart={this.moveHeaderStart} \n        onTouchMove={this.moveHeader} \n        onTouchEnd={this.moveHeaderEnd}\n        onMouseDown={this.moveHeaderStart}\n        onMouseMove={this.moveHeader}\n        onMouseUp={this.moveHeaderEnd}\n      >\n        <div className=\"opts\">\n          <div \n            className={`opt icon ${this.props.dataView === '$' ? 'active' : ''}`}\n            onClick={this.props.dataView === '$' ? null : () => this.props.onSettingsChange('dataView', '$')}\n          >$</div>\n          <div \n            className={`opt icon ${this.props.dataView === '%' ? 'active' : ''}`}\n            onClick={this.props.dataView === '%' ? null : () => this.props.onSettingsChange('dataView', '%')}\n          >%</div>\n          <div className=\"opt divider\" />\n          <div \n            className={`opt single ${this.props.feeAdjustments ? 'active' : ''}`}\n            onClick={() => this.props.onSettingsChange('feeAdjustments', !this.props.feeAdjustments)}\n          >Fees</div>\n          <div \n            className={`opt single ${this.props.contributionAdjustments ? 'active' : ''}`}\n            onClick={() => this.props.onSettingsChange('contributionAdjustments', !this.props.contributionAdjustments)}\n          >Adj</div>\n        </div>\n        <div className=\"date-pickers\">\n          <div className=\"from\">\n            <div className=\"text\">\n              <div className=\"big\">{sep[0].d}</div>\n              <div className=\"small\">{sep[0].m} {sep[0].y}</div>\n            </div>\n            <input \n              key={this.props.activeDates[0].format('L')}\n              ref=\"from\"\n              type=\"date\" \n              onBlur={this.dateChange} \n              defaultValue={this.props.activeDates[0].format('YYYY-MM-DD')} \n            />\n          </div>\n          <div className=\"to\">\n            <div className=\"text\">\n              <div className=\"big\">{sep[1].d}</div>\n              <div className=\"small\">{sep[1].m} {sep[1].y}</div>\n            </div>\n            <input \n              key={this.props.activeDates[1].format('L')}\n              ref=\"to\"\n              type=\"date\" \n              onBlur={this.dateChange} \n              defaultValue={this.props.activeDates[1].format('YYYY-MM-DD')} \n            />\n          </div>\n        </div>\n        <div className=\"opts\">\n          {\n            this.props.dateOpts.map((opt, i) => {\n              const active = this.props.activeDateOpt === i;\n              return <div \n                key={i}\n                className={`opt ${active ? 'active' : ''}`}\n                onClick={active ? null : () => this.props.onDateChange('opt', i)}\n              >{opt.range_count}<span>{opt.range_type}</span></div>\n            })\n          }\n        </div>\n        <div className=\"hideBanner\" onClick={this.hideMenu}>{angle}</div>\n      </div>\n    ]\n  }\n\n}","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { ContentEditable } from './components';\nimport Interface from './Interface'\nimport InterfaceMobile from './InterfaceMobile'\nimport { decrypt, debounce } from './utils';\nimport anime from 'animejs';\nimport moment from 'moment';\nimport { rotatephone } from './utils/icons';\n\nrequire('./app.css');\n\nconst MOBILE_DEV = false;\n\nconst REQUEST = require('request');\nconst DATA_URL = 'https://raw.githubusercontent.com/DerTarchin/misc/master/.dpd';\nconst IS_ENTER = e => (e.key || e.keyCode) === 'Enter' || e.which === 13;\n\nconst LOGIN_ANIM_DURATION = 1000;\n\nconst NOW = moment();\nconst DATE_OPTS = [\n  {\n    range_count: '1',\n    range_type: 'M',\n    start: NOW.clone().subtract(1, 'months'),\n    end: NOW,\n  },\n  {\n    range_count: '3',\n    range_type: 'M',\n    start: NOW.clone().subtract(3, 'months'),\n    end: NOW,\n  },\n  {\n    range_count: '6',\n    range_type: 'M',\n    start: NOW.clone().subtract(6, 'months'),\n    end: NOW,\n  },\n  {\n    range_count: '1',\n    range_type: 'Y',\n    start: NOW.clone().subtract(12, 'months'),\n    end: NOW,\n  }\n];\n\nclass App extends Component {\n  state = {\n    // app init\n    data: null,\n    encrypted: true,\n    unlockError: '',\n    showUnlock: true,\n\n    // app settings\n    lastDay: NOW,\n    activeDateOpt: 0,\n    activeDates: [DATE_OPTS[0].start, DATE_OPTS[0].end],\n    feeAdjustments: true,\n    contributionAdjustments: false,\n    dataView: '%',\n  }\n  meta = {}\n\n  componentWillMount = () => {\n    // disable overscroll on mobile\n    document.addEventListener('touchmove', e => e.preventDefault(), false);\n    window.addEventListener('orientationchange', () => this.setState({ mobileOrientation: window.orientation }), false);\n  }\n\n  componentDidMount = () => {\n    // retrieve encrypted data\n    if(DATA_URL) REQUEST(DATA_URL, (error, response, body) => {\n      if(error || !body) alert(error);\n      this.meta.encryptedMsg = JSON.parse(body).encryptedMsg;\n      // dev\n      setTimeout(() => this.unlock('dpdev'), 500);\n    });\n\n    // ===\n    if(this.state.encrypted) {\n      // activate anime.js for unlock dialog\n      this.meta.loginAnime = anime({\n        targets: this.refs.unlock,\n        opacity: [0,1],\n        easing: 'easeInQuad',\n        duration: LOGIN_ANIM_DURATION,\n      });\n      this.refs.unlockInput.focus();\n    }\n  }\n\n  unlock = passphrase => {\n    if(!passphrase || !this.state.encrypted) return this.refs.unlockInput.focus();\n    if(!this.meta.encryptedMsg) {\n      this.refs.unlockInput.focus();\n      this.setState({ unlockError: 'Unable to retrieve data.'})\n      return;\n    }\n    const data = decrypt(this.meta.encryptedMsg, passphrase);\n    if(!data) {\n      this.refs.unlockInput.clearContent();\n      this.refs.unlockInput.focus();\n      this.setState({ unlockError: 'Incorrect passphrase.'})\n      return;\n    }\n    console.log(data, data.dertarchinroth)\n\n    // parse data\n    const accounts = Object.keys(data),\n          activeAccount = accounts[0];\n    this.meta.decryptedMsg = data;\n    this.meta.acctData = data[activeAccount];\n    const { acctData } = this.meta;\n    \n    // reset date ranges\n    const lastDay = moment(acctData.meta.last_updated, 'L');\n    while((!lastDay.day() || lastDay.day() === 6) || !acctData[lastDay.format('L')]) {\n      lastDay.subtract(1, 'days');\n    }\n    const startDate = moment(acctData.meta.start_date, 'L');\n    DATE_OPTS[0].start = lastDay.clone().subtract(1,'months');\n    DATE_OPTS[1].start = lastDay.clone().subtract(3,'months');\n    DATE_OPTS[2].start = lastDay.clone().subtract(6,'months');\n    DATE_OPTS[3].start = lastDay.clone().subtract(1,'years');\n    DATE_OPTS.forEach(d => {\n      if(d.start.isBefore(startDate)) d.start = startDate;\n      d.end = lastDay;\n    });\n\n    // apply adjustments\n    this.adjData();\n\n    this.setState({ \n      activeData: this.trimData([DATE_OPTS[0].start, DATE_OPTS[0].end]), \n      activeDates: [DATE_OPTS[0].start, DATE_OPTS[0].end],\n      accounts, \n      activeAccount, \n      lastDay,\n      encrypted: false,\n    }, () => {\n      this.meta.loginAnime = anime({\n        targets: this.refs.unlock,\n        opacity: [1,0],\n        easing: 'easeOutQuad',\n        duration: LOGIN_ANIM_DURATION / 2,\n        complete: anim => this.setState({ showUnlock: false })\n      });\n    });    \n  }\n\n  hideUnlockError = e => {\n    e.target.classList.add('hide');\n    this.refs.unlockInput.focus()\n    setTimeout(() => this.setState({ unlockError: '' }), 150);\n  }\n\n  // trims active data to relevant dates, and meta\n  trimData = dates => {\n    dates = dates || this.state.activeDates;\n    const { acctData } = this.meta;\n    const data = { meta: acctData.meta };\n    for(const day = dates[0].clone(); day.isSameOrBefore(dates[1], 'days'); day.add(1, 'days')) {\n      const formatted = day.format('L');\n      data[formatted] = acctData[formatted];\n    }\n    return data;\n  }\n\n  adjData = adj => {\n    const { acctData: data } = this.meta;\n    const {\n      feeAdjustments: fee,\n      // dataView: view,\n      contributionAdjustments: contrib\n    } = adj || this.state;\n    const day = moment(data.meta.last_updated, 'L'),\n          start = moment(data.meta.start_date, 'L');\n    let tcontrib;\n    while(day.isSameOrAfter(start, 'days')) {\n      const d = data[day.format('L')]\n      if(d) {\n        if(!tcontrib) tcontrib = d.total_contributions;\n        adj = {\n          balance: d.balance,\n          cash_balance: d.cash_balance,\n          total_contributions: d.total_contributions\n        };\n        if(!fee) {\n          adj.balance += d.total_fees;\n          adj.cash_balance += d.total_fees;\n        }\n        if(contrib) {\n          adj.balance += (tcontrib - d.total_contributions);\n          adj.cash_balance += (tcontrib - d.total_contributions);\n          adj.total_contributions = tcontrib;\n        }\n        adj.pl = adj.balance - adj.total_contributions;\n        adj.plPerc = (adj.balance - adj.total_contributions) / adj.total_contributions * 100;\n        // if(view === '$') {\n        // }\n        // if(view === '%') {\n        // }\n        d.adj = adj;\n      }\n      day.subtract(1, 'days');\n    }\n  }\n\n  onDateChange = (type, val) => {\n    // debounce(() => {\n      const isOpt = type === 'opt';\n      let activeDateOpt = isOpt ? val : -1,\n          activeDates = isOpt ? [DATE_OPTS[val].start, DATE_OPTS[val].end] : val;\n      // check if date is valid\n      while(!this.meta.acctData[activeDates[0].format('L')]) activeDates[0].add(1, 'days');\n      while(!this.meta.acctData[activeDates[1].format('L')]) activeDates[1].subtract(1, 'days');\n      // check if dates are same as opt\n      if(!isOpt) {\n        DATE_OPTS.forEach((d,i) => {\n          if(activeDateOpt > -1) return;\n          if(d.start.isSame(activeDates[0], 'days') && d.end.isSame(activeDates[1], 'days')) activeDateOpt = i;\n        })\n      }\n      const activeData = this.trimData(activeDates);\n\n      this.setState({ \n        activeDateOpt,\n        activeDates,\n        activeData\n      });\n    // }, 20);\n  }\n\n  onSettingsChange = (key, val) => {\n    this.adjData({...this.state, [key]: val})\n    this.setState({ [key]: val });\n  }\n\n  render = () => {\n    const isMobile = MOBILE_DEV || window.screen.width <= 767;\n    const interfaceProps = this.state.encrypted ? {} : {\n      data: this.state.activeData,\n      history: this.meta.acctData,\n      \n      lastDay: this.state.lastDay,\n      dateOpts: DATE_OPTS,\n      activeDateOpt: this.state.activeDateOpt,\n      activeDates: this.state.activeDates,\n      onDateChange: this.onDateChange,\n\n      dataView: this.state.dataView,\n      feeAdjustments: this.state.feeAdjustments,\n      contributionAdjustments: this.state.contributionAdjustments,\n      onSettingsChange: this.onSettingsChange,\n    }\n\n    return (\n      <div \n        className={`app ${isMobile ? 'mobile' : ''} ${MOBILE_DEV ? 'dev' : ''}`} \n        id=\"app\"\n        key={this.state.mobileOrientation}\n        style={{background: 'rgba(0,0,0,.15)'}}\n      >\n        {\n          !this.state.showUnlock ? null : \n          <div ref=\"unlock\" className=\"unlock\">\n            <img className=\"logo\" alt=\"\" src={require('./static/logo.svg')}/>\n            <ContentEditable\n              ref=\"unlockInput\"\n              className=\"input\"\n              onKeyDown={e => { if(IS_ENTER(e)) this.unlock(e.target.textContent) }}\n            />\n            {\n              !this.state.unlockError ? null :\n              <div className=\"unlock-error\" onClick={this.hideUnlockError}>{this.state.unlockError}</div>\n            }\n          </div>\n        }\n        { \n          this.state.encrypted ? null : \n          isMobile ? <InterfaceMobile {...interfaceProps}/> : <Interface {...interfaceProps}/> \n        }\n        <div className=\"rotate\">{rotatephone}</div>\n      </div>\n    )\n  }\n}\n\n// ========================================\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}